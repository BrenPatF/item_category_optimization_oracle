
Database             Time                 Version
-------------------- -------------------- ------------------------------
Start: ORCL          09-JUN-2024 23:05:54 Version 21.3.0.0.0

Recompile item_cat_seqs.pkb

Package body created.

No errors.
Just set context values: SEQ_SIZE = 11, MAX_PRICE = 890, ITEM_WIDTH = 3, TOP_N = 10
Previously set context values: SEQ_TYPE = , MIN_VALUE = 0, KEEP_NUM = 50

PL/SQL procedure successfully completed.


PL/SQL procedure successfully completed.

Pop_Table_Iterate
old   2:   Item_Cat_Seqs.Pop_Table_Iterate(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Pop_Table_Iterate(p_keep_num      => 300,
old   3:                                   p_min_value     => &MIN_VALUE);
new   3:                                   p_min_value     => 0);
10 running sums
SQL_ID  323bar13mrwwy, child number 0
-------------------------------------
INSERT /*+ gather_plan_statistics INSERT_PATHS */ INTO PATHS (
PATH_RNK, ITEM_RNK, LEV, TOT_PRICE, TOT_VALUE, CAT_ID, NEXT_CAT_ID,
SAME_CATS, MIN_ITEMS, CATS_PATH, PATH ) WITH PATH_JOIN AS ( SELECT
ROW_NUMBER() OVER (PARTITION BY TRW.CATS_PATH || IRK.CAT_ID ORDER BY
TRW.TOT_VALUE + IRK.ITEM_VALUE DESC, TRW.TOT_PRICE + IRK.ITEM_PRICE)
PATH_RNK, IRK.ITEM_RNK, :B6 LEV, TRW.TOT_PRICE + IRK.ITEM_PRICE
TOT_PRICE, TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_ID,
IRK.NEXT_CAT_ID, CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1
ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CATS_PATH || IRK.CAT_ID
CATS_PATH, TRW.PATH || IRK.ITEM_ID PATH FROM PATHS TRW JOIN
ITEMS_RANKED IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK + 1) AND
(IRK.N_ITEMS - (:B1 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE +
IRK.ITEM_PRICE + :B5 <= :B4 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B3 >=
:B2 AND TRW.LEV < :B1 AND CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END <= IRK.MAX_ITEMS AND :B1 - (TRW.LEV + 1) +
LEAST(CAS
Plan hash value: 4022110882
----------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers | Reads  | Writes |  OMem |  1Mem | Used-Mem | Used-Tmp|
----------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |                    |      1 |        |      0 |00:00:01.59 |    3005 |  14083 |  14083 |       |       |          |         |
|   1 |  LOAD TABLE CONVENTIONAL | PATHS              |      1 |        |      0 |00:00:01.59 |    3005 |  14083 |  14083 |       |       |          |         |
|*  2 |   VIEW                   |                    |      1 |      1 |   2700 |00:00:00.88 |    2791 |  14083 |  14083 |       |       |          |         |
|   3 |    WINDOW SORT           |                    |      1 |      1 |    633K|00:00:01.93 |    2791 |  14083 |  14083 |   123M|  3776K|   97M (1)|     111M|
|   4 |     NESTED LOOPS         |                    |      1 |      1 |    633K|00:00:00.49 |    2788 |      0 |      0 |       |       |          |         |
|*  5 |      TABLE ACCESS FULL   | PATHS              |      1 |      1 |   2700 |00:00:00.01 |      62 |      0 |      0 |       |       |          |         |
|*  6 |      INDEX RANGE SCAN    | SYS_IOT_TOP_177079 |   2700 |      1 |    633K|00:00:00.43 |    2726 |      0 |      0 |       |       |          |         |
----------------------------------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
2 - filter(("PATH_RNK"<=:B7 OR :B7=0))
5 - filter("TRW"."LEV"<:B1)
6 - access("IRK"."ITEM_RNK">="TRW"."ITEM_RNK"+1)
filter(("TRW"."TOT_PRICE"+"IRK"."ITEM_PRICE"+:B5<=:B4 AND "TRW"."TOT_VALUE"+"IRK"."ITEM_VALUE"+:B3>=:B2 AND
"IRK"."ITEM_RNK"<="IRK"."N_ITEMS"-(:B1-"TRW"."LEV"-1) AND "IRK"."MAX_ITEMS">=CASE "IRK"."CAT_ID" WHEN "TRW"."CAT_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1
END  AND "IRK"."MIN_REMAIN"<=:B1-("TRW"."LEV"+1)+LEAST(CASE "IRK"."CAT_ID" WHEN "TRW"."CAT_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1 END ,"IRK"."MIN_ITEMS")
AND ("IRK"."CAT_ID"="TRW"."CAT_ID" OR "TRW"."SAME_CATS">="TRW"."MIN_ITEMS") AND ("IRK"."CAT_ID"="TRW"."CAT_ID" OR
"IRK"."CAT_ID"=NVL("TRW"."NEXT_CAT_ID","IRK"."CAT_ID"))))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Pop_Table_Iterate, Constructed at 09 Jun 2024 23:05:54, written at 23:06:01
======================================================================================
Timer                      Elapsed         CPU       Calls       Ela/Call       CPU/Call
----------------------  ----------  ----------  ----------  -------------  -------------
Initial delete (0)            0.01        0.00           1        0.00900        0.00000
Initial insert (1)            0.00        0.00           1        0.00000        0.00000
Insert paths 1 (43)           0.00        0.00           1        0.00100        0.00000
Delete paths 1 (1)            0.00        0.00           1        0.00000        0.00000
Insert paths 2 (300)          0.02        0.03           1        0.02400        0.03000
Delete paths 2 (43)           0.00        0.00           1        0.00000        0.00000
Insert paths 3 (300)          0.16        0.15           1        0.15500        0.15000
Delete paths 3 (300)          0.00        0.00           1        0.00100        0.00000
Insert paths 4 (300)          0.16        0.14           1        0.15800        0.14000
Delete paths 4 (300)          0.00        0.00           1        0.00100        0.00000
Insert paths 5 (600)          0.21        0.21           1        0.20900        0.21000
Delete paths 5 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths 6 (1200)         0.42        0.42           1        0.41900        0.42000
Delete paths 6 (600)          0.00        0.00           1        0.00000        0.00000
Insert paths 7 (1800)         0.69        0.65           1        0.68700        0.65000
Delete paths 7 (1200)         0.00        0.00           1        0.00100        0.00000
Insert paths 8 (2400)         1.03        1.02           1        1.03000        1.02000
Delete paths 8 (1800)         0.00        0.00           1        0.00100        0.00000
Insert paths 9 (2700)         1.47        1.20           1        1.46900        1.20000
Delete paths 9 (2400)         0.00        0.00           1        0.00100        0.00000
Insert paths 10 (2700)        1.80        1.42           1        1.80200        1.42000
Delete paths 10 (2700)        0.00        0.01           1        0.00200        0.01000
Insert paths 11 (2400)        1.05        0.99           1        1.04600        0.99000
Delete paths 11 (2700)        0.00        0.01           1        0.00200        0.01000
(Other)                       0.00        0.00           1        0.00000        0.00000
----------------------  ----------  ----------  ----------  -------------  -------------
Total                         7.02        6.25          25        0.28072        0.25000
----------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00893, CPU: 0.00982]

PL/SQL procedure successfully completed.


Path                              Total Value Total Price  Rank
--------------------------------- ----------- ----------- -----
037024160463488298027452193344166        1965         889     1
037024160264488298045027452193166                     890     2
037024160463488298044027452193344        1963         890     3
037024160463488298044027452193166        1962         884     4
037024160264488298314027452193166                     885     5
037024160272488298044027452193166                     889     6
252024160264488298044027452193166        1959         889     7
037024160463488298045027452193344        1958         887     8
037024160463488298045027452193166        1957         881     9
037024160463488298314027452328166                     886    10

10 rows selected.


PL/SQL procedure successfully completed.

Solutions by Category

Total Value Total Price  Rank Position Min Actual  Max Player List
----------- ----------- ----- -------- --- ------- --- -------------------------
       1965         889     1 DF       3    <-3    5   024, 160, 463
                              FW       1      2    3   488, 298
                              GK       1    <-1->  1   037
                              MF       2      5->  5   027, 452, 193, 344, 166
                    890     2 DF       3    <-3    5   024, 160, 264
                              FW       1      3->  3   488, 298, 045
                              GK       1    <-1->  1   037
                              MF       2      4    5   027, 452, 193, 166
       1963         890     3 DF       3    <-3    5   024, 160, 463
                              FW       1      3->  3   488, 298, 044
                              GK       1    <-1->  1   037
                              MF       2      4    5   027, 452, 193, 344
       1962         884     4 DF       3    <-3    5   024, 160, 463
                              FW       1      3->  3   488, 298, 044
                              GK       1    <-1->  1   037
                              MF       2      4    5   027, 452, 193, 166
                    885     5 DF       3    <-3    5   024, 160, 264
                              FW       1      3->  3   488, 298, 314
                              GK       1    <-1->  1   037
                              MF       2      4    5   027, 452, 193, 166
                    889     6 DF       3    <-3    5   024, 160, 272
                              FW       1      3->  3   488, 298, 044
                              GK       1    <-1->  1   037
                              MF       2      4    5   027, 452, 193, 166
       1959         889     7 DF       3    <-3    5   024, 160, 264
                              FW       1      3->  3   488, 298, 044
                              GK       1    <-1->  1   252
                              MF       2      4    5   027, 452, 193, 166
       1958         887     8 DF       3    <-3    5   024, 160, 463
                              FW       1      3->  3   488, 298, 045
                              GK       1    <-1->  1   037
                              MF       2      4    5   027, 452, 193, 344
       1957         881     9 DF       3    <-3    5   024, 160, 463
                              FW       1      3->  3   488, 298, 045
                              GK       1    <-1->  1   037
                              MF       2      4    5   027, 452, 193, 166
                    886    10 DF       3    <-3    5   024, 160, 463
                              FW       1      3->  3   488, 298, 314
                              GK       1    <-1->  1   037
                              MF       2      4    5   027, 452, 328, 166

40 rows selected.


PL/SQL procedure successfully completed.

Pop_Table_Iterate_Base
old   2:   Item_Cat_Seqs.Pop_Table_Iterate_Base(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Pop_Table_Iterate_Base(p_keep_num      => 300,
old   3:                                        p_min_value     => &MIN_VALUE);
new   3:                                        p_min_value     => 0);
10 running sums
SQL_ID  3qrdzuqh0vtjf, child number 0
-------------------------------------
INSERT /*+ gather_plan_statistics INSERT_PATHS */ INTO PATHS_BASE (
PATH_RNK, ITEM_RNK, LEV, TOT_PRICE, TOT_VALUE, CAT_BASE_ID,
NEXT_CAT_BASE_ID, SAME_CATS, MIN_ITEMS, CAT_BASE_SUM, PATH ) WITH
PATH_JOIN AS ( SELECT ROW_NUMBER() OVER (PARTITION BY TRW.CAT_BASE_SUM
+ IRK.CAT_BASE_ID ORDER BY TRW.TOT_VALUE + IRK.ITEM_VALUE DESC,
TRW.TOT_PRICE + IRK.ITEM_PRICE) PATH_RNK, IRK.ITEM_RNK, :B6 LEV,
TRW.TOT_PRICE + IRK.ITEM_PRICE TOT_PRICE, TRW.TOT_VALUE +
IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_BASE_ID, IRK.NEXT_CAT_BASE_ID, CASE
IRK.CAT_BASE_ID WHEN TRW.CAT_BASE_ID THEN TRW.SAME_CATS + 1 ELSE 1 END
SAME_CATS, IRK.MIN_ITEMS, TRW.CAT_BASE_SUM + IRK.CAT_BASE_ID
CAT_BASE_SUM, TRW.PATH || IRK.ITEM_ID PATH FROM PATHS_BASE TRW JOIN
ITEMS_RANKED_BASE IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK + 1) AND
(IRK.N_ITEMS - (:B1 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE +
IRK.ITEM_PRICE + :B5 <= :B4 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B3 >=
:B2 AND TRW.LEV < :B1 AND CASE IRK.CAT_BASE_ID WHEN TRW.CAT_BASE_ID
THEN TRW.SA
Plan hash value: 3694970187
----------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers | Reads  | Writes |  OMem |  1Mem | Used-Mem | Used-Tmp|
----------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |                    |      1 |        |      0 |00:00:01.41 |    2956 |  11597 |  11573 |       |       |          |         |
|   1 |  LOAD TABLE CONVENTIONAL | PATHS_BASE         |      1 |        |      0 |00:00:01.41 |    2956 |  11597 |  11573 |       |       |          |         |
|*  2 |   VIEW                   |                    |      1 |      1 |   2700 |00:00:00.79 |    2781 |  11597 |  11573 |       |       |          |         |
|   3 |    WINDOW SORT           |                    |      1 |      1 |    633K|00:00:01.22 |    2781 |  11597 |  11573 |   101M|  3444K|   97M (1)|      91M|
|   4 |     NESTED LOOPS         |                    |      1 |      1 |    633K|00:00:00.45 |    2778 |      0 |      0 |       |       |          |         |
|*  5 |      TABLE ACCESS FULL   | PATHS_BASE         |      1 |      1 |   2700 |00:00:00.01 |      52 |      0 |      0 |       |       |          |         |
|*  6 |      INDEX RANGE SCAN    | SYS_IOT_TOP_177081 |   2700 |      1 |    633K|00:00:00.41 |    2726 |      0 |      0 |       |       |          |         |
----------------------------------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
2 - filter(("PATH_RNK"<=:B7 OR :B7=0))
5 - filter("TRW"."LEV"<:B1)
6 - access("IRK"."ITEM_RNK">="TRW"."ITEM_RNK"+1)
filter(("TRW"."TOT_PRICE"+"IRK"."ITEM_PRICE"+:B5<=:B4 AND "TRW"."TOT_VALUE"+"IRK"."ITEM_VALUE"+:B3>=:B2 AND
"IRK"."ITEM_RNK"<="IRK"."N_ITEMS"-(:B1-"TRW"."LEV"-1) AND "IRK"."MAX_ITEMS">=CASE "IRK"."CAT_BASE_ID" WHEN "TRW"."CAT_BASE_ID" THEN "TRW"."SAME_CATS"+1
ELSE 1 END  AND "IRK"."MIN_REMAIN"<=:B1-("TRW"."LEV"+1)+LEAST(CASE "IRK"."CAT_BASE_ID" WHEN "TRW"."CAT_BASE_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1 END
,"IRK"."MIN_ITEMS") AND ("IRK"."CAT_BASE_ID"="TRW"."CAT_BASE_ID" OR "TRW"."SAME_CATS">="TRW"."MIN_ITEMS") AND ("IRK"."CAT_BASE_ID"="TRW"."CAT_BASE_ID"
OR "IRK"."CAT_BASE_ID"=NVL("TRW"."NEXT_CAT_BASE_ID","IRK"."CAT_BASE_ID"))))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Pop_Table_Iterate_Base, Constructed at 09 Jun 2024 23:06:01, written at 23:06:08
===========================================================================================
Timer                           Elapsed         CPU       Calls       Ela/Call       CPU/Call
---------------------------  ----------  ----------  ----------  -------------  -------------
Initial delete (0)                 0.01        0.00           1        0.01100        0.00000
Initial insert (1)                 0.00        0.00           1        0.00000        0.00000
Insert paths_Base 1 (43)           0.00        0.00           1        0.00100        0.00000
Delete paths_Base 1 (1)            0.00        0.00           1        0.00000        0.00000
Insert paths_Base 2 (300)          0.02        0.03           1        0.02200        0.03000
Delete paths_Base 2 (43)           0.00        0.00           1        0.00000        0.00000
Insert paths_Base 3 (300)          0.14        0.14           1        0.13800        0.14000
Delete paths_Base 3 (300)          0.00        0.00           1        0.00100        0.00000
Insert paths_Base 4 (300)          0.14        0.12           1        0.13800        0.12000
Delete paths_Base 4 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths_Base 5 (600)          0.20        0.19           1        0.20000        0.19000
Delete paths_Base 5 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths_Base 6 (1200)         0.40        0.37           1        0.40200        0.37000
Delete paths_Base 6 (600)          0.00        0.00           1        0.00100        0.00000
Insert paths_Base 7 (1800)         0.66        0.65           1        0.66300        0.65000
Delete paths_Base 7 (1200)         0.00        0.00           1        0.00000        0.00000
Insert paths_Base 8 (2400)         1.01        0.94           1        1.00500        0.94000
Delete paths_Base 8 (1800)         0.00        0.01           1        0.00100        0.01000
Insert paths_Base 9 (2700)         1.23        1.20           1        1.22700        1.20000
Delete paths_Base 9 (2400)         0.00        0.00           1        0.00100        0.00000
Insert paths_Base 10 (2700)        1.63        1.31           1        1.62700        1.31000
Delete paths_Base 10 (2700)        0.00        0.00           1        0.00100        0.00000
Insert paths_Base 11 (2400)        0.93        0.93           1        0.93200        0.93000
Delete paths_Base 11 (2700)        0.00        0.00           1        0.00200        0.00000
(Other)                            0.00        0.00           1        0.00000        0.00000
---------------------------  ----------  ----------  ----------  -------------  -------------
Total                              6.37        5.89          25        0.25492        0.23560
---------------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00862, CPU: 0.00862]

PL/SQL procedure successfully completed.


Path                              Total Value Total Price  Rank
--------------------------------- ----------- ----------- -----
037024160463488298027452193344166        1965         889     1
037024160264488298045027452193166                     890     2
037024160463488298044027452193344        1963         890     3
037024160463488298044027452193166        1962         884     4
037024160264488298314027452193166                     885     5
037024160272488298044027452193166                     889     6
252024160264488298044027452193166        1959         889     7
037024160463488298045027452193344        1958         887     8
037024160463488298045027452193166        1957         881     9
037024160463488298314027452328166                     886    10

10 rows selected.


PL/SQL procedure successfully completed.

Pop_Table_Iterate_Link
old   2:   Item_Cat_Seqs.Pop_Table_Iterate_Link(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Pop_Table_Iterate_Link(p_keep_num      => 300,
old   3:                                        p_min_value     => &MIN_VALUE);
new   3:                                        p_min_value     => 0);
10 running sums
SQL_ID  cyyssj0zrc1d8, child number 0
-------------------------------------
INSERT /*+ gather_plan_statistics INSERT_ILN */ INTO PATHS_LINK (
PATH_RNK, ITEM_RNK, LEV, TOT_PRICE, TOT_VALUE, CAT_ID, NEXT_CAT_ID,
SAME_CATS, MIN_ITEMS, CATS_PATH, PRIOR_ILN_ID, ILN_ID ) WITH PATH_JOIN
AS ( SELECT ROW_NUMBER() OVER (PARTITION BY TRW.CATS_PATH || IRK.CAT_ID
ORDER BY TRW.TOT_VALUE + IRK.ITEM_VALUE DESC, TRW.TOT_PRICE +
IRK.ITEM_PRICE) PATH_RNK, IRK.ITEM_RNK, :B7 LEV, TRW.TOT_PRICE +
IRK.ITEM_PRICE TOT_PRICE, TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE,
IRK.CAT_ID, IRK.NEXT_CAT_ID, CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CATS_PATH ||
IRK.CAT_ID CATS_PATH, TRW.ILN_ID FROM PATHS_LINK TRW JOIN
ITEMS_RANKED_LINK IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK + 1) AND
(:B2 - (:B1 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE + IRK.ITEM_PRICE + :B6
<= :B5 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B4 >= :B3 AND TRW.LEV <
:B1 AND CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1 ELSE 1
END <= IRK.MAX_ITEMS AND :B1 - (TRW.LEV + 1) + LEAST(
Plan hash value: 1949073728
----------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers | Reads  | Writes |  OMem |  1Mem | Used-Mem | Used-Tmp|
----------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |                    |      1 |        |      0 |00:00:01.41 |    3278 |  11501 |  11501 |       |       |          |         |
|   1 |  LOAD TABLE CONVENTIONAL | PATHS_LINK         |      1 |        |      0 |00:00:01.41 |    3278 |  11501 |  11501 |       |       |          |         |
|   2 |   SEQUENCE               | ILN_SEQ            |      1 |        |   2700 |00:00:00.79 |    3107 |  11501 |  11501 |       |       |          |         |
|*  3 |    VIEW                  |                    |      1 |      1 |   2700 |00:00:00.79 |    3107 |  11501 |  11501 |       |       |          |         |
|   4 |     WINDOW SORT          |                    |      1 |      1 |    633K|00:00:01.39 |    3107 |  11501 |  11501 |   101M|  3434K|   97M (1)|      90M|
|   5 |      NESTED LOOPS        |                    |      1 |      1 |    633K|00:00:00.41 |    3104 |      0 |      0 |       |       |          |         |
|*  6 |       TABLE ACCESS FULL  | PATHS_LINK         |      1 |      1 |   2700 |00:00:00.01 |      52 |      0 |      0 |       |       |          |         |
|*  7 |       INDEX RANGE SCAN   | SYS_IOT_TOP_177083 |   2700 |      1 |    633K|00:00:00.36 |    3052 |      0 |      0 |       |       |          |         |
----------------------------------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
3 - filter(("PATH_RNK"<=:B8 OR :B8=0))
6 - filter("TRW"."LEV"<:B1)
7 - access("IRK"."ITEM_RNK">="TRW"."ITEM_RNK"+1 AND "IRK"."ITEM_RNK"<=:B2-(:B1-"TRW"."LEV"-1))
filter(("TRW"."TOT_PRICE"+"IRK"."ITEM_PRICE"+:B6<=:B5 AND "TRW"."TOT_VALUE"+"IRK"."ITEM_VALUE"+:B4>=:B3 AND "IRK"."MAX_ITEMS">=CASE
"IRK"."CAT_ID" WHEN "TRW"."CAT_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1 END  AND "IRK"."MIN_REMAIN"<=:B1-("TRW"."LEV"+1)+LEAST(CASE "IRK"."CAT_ID" WHEN
"TRW"."CAT_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1 END ,"IRK"."MIN_ITEMS") AND ("IRK"."CAT_ID"="TRW"."CAT_ID" OR "TRW"."SAME_CATS">="TRW"."MIN_ITEMS") AND
("IRK"."CAT_ID"="TRW"."CAT_ID" OR "IRK"."CAT_ID"=NVL("TRW"."NEXT_CAT_ID","IRK"."CAT_ID"))))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Pop_Table_Iterate_Link, Constructed at 09 Jun 2024 23:06:08, written at 23:06:14
===========================================================================================
Timer                            Elapsed         CPU       Calls       Ela/Call       CPU/Call
----------------------------  ----------  ----------  ----------  -------------  -------------
Initial delete (0)                  0.01        0.00           1        0.01000        0.00000
Initial insert (1)                  0.00        0.00           1        0.00100        0.00000
Insert item_links  1 (1)            0.00        0.00           1        0.00000        0.00000
Insert paths_Link 1 (43)            0.00        0.00           1        0.00000        0.00000
Delete paths_Link 1 (1)             0.00        0.00           1        0.00100        0.00000
Insert item_links  2 (43)           0.00        0.00           1        0.00000        0.00000
Insert paths_Link 2 (300)           0.02        0.03           1        0.02000        0.03000
Delete paths_Link 2 (43)            0.00        0.00           1        0.00000        0.00000
Insert item_links  3 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths_Link 3 (300)           0.13        0.11           1        0.12600        0.11000
Delete paths_Link 3 (300)           0.00        0.00           1        0.00000        0.00000
Insert item_links  4 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths_Link 4 (300)           0.13        0.12           1        0.12600        0.12000
Delete paths_Link 4 (300)           0.00        0.00           1        0.00100        0.00000
Insert item_links  5 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths_Link 5 (600)           0.17        0.17           1        0.17400        0.17000
Delete paths_Link 5 (300)           0.00        0.00           1        0.00000        0.00000
Insert item_links  6 (600)          0.00        0.00           1        0.00100        0.00000
Insert paths_Link 6 (1200)          0.36        0.38           1        0.36200        0.38000
Delete paths_Link 6 (600)           0.00        0.00           1        0.00000        0.00000
Insert item_links  7 (1200)         0.00        0.00           1        0.00000        0.00000
Insert paths_Link 7 (1800)          0.61        0.61           1        0.60500        0.61000
Delete paths_Link 7 (1200)          0.00        0.00           1        0.00000        0.00000
Insert item_links  8 (1800)         0.00        0.00           1        0.00100        0.00000
Insert paths_Link 8 (2400)          0.92        0.90           1        0.91500        0.90000
Delete paths_Link 8 (1800)          0.00        0.00           1        0.00100        0.00000
Insert item_links  9 (2400)         0.00        0.00           1        0.00100        0.00000
Insert paths_Link 9 (2700)          1.16        1.16           1        1.16200        1.16000
Delete paths_Link 9 (2400)          0.00        0.00           1        0.00100        0.00000
Insert item_links  10 (2700)        0.00        0.00           1        0.00100        0.00000
Insert paths_Link 10 (2700)         1.62        1.27           1        1.61700        1.27000
Delete paths_Link 10 (2700)         0.00        0.00           1        0.00200        0.00000
Insert item_links  11 (2700)        0.00        0.01           1        0.00100        0.01000
Insert paths_Link 11 (2400)         0.95        0.94           1        0.94700        0.94000
Delete paths_Link 11 (2700)         0.00        0.00           1        0.00200        0.00000
(Other)                             0.00        0.00           1        0.00000        0.00000
----------------------------  ----------  ----------  ----------  -------------  -------------
Total                               6.08        5.70          36        0.16883        0.15833
----------------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00885, CPU: 0.00885]

PL/SQL procedure successfully completed.


Path                              Total Value Total Price  Rank
--------------------------------- ----------- ----------- -----
037024160463488298027452193344166        1965         889     1
037024160264488298045027452193166                     890     2
037024160463488298044027452193344        1963         890     3
037024160463488298044027452193166        1962         884     4
037024160264488298314027452193166                     885     5
037024160272488298044027452193166                     889     6
252024160264488298044027452193166        1959         889     7
037024160463488298045027452193344        1958         887     8
037024160463488298045027452193166        1957         881     9
037024160272488298045027452193166                     886    10

10 rows selected.


PL/SQL procedure successfully completed.

old   2:      Item_Cat_Seqs.Set_Contexts(p_keep_num      => &KEEP_NUM,
new   2:      Item_Cat_Seqs.Set_Contexts(p_keep_num      => 300,
old   3:                                 p_min_value     => &MIN_VALUE);
new   3:                                 p_min_value     => 0);
Just set context values: MIN_VALUE = 0, KEEP_NUM = 300
Previously set context values: SEQ_TYPE = , SEQ_SIZE = 11, MAX_PRICE = 890, ITEM_WIDTH = 3, TOP_N = 10

PL/SQL procedure successfully completed.

paths_link_ranked_item_v - item level

Total Value Total Price  Rank Position Item Player                              Value      Price
----------- ----------- ----- -------- ---- ------------------------------ ---------- ----------
       1965         889     1 GK       037  Asmir Begovic                         154         56
                              DF       024  Leighton Baines                       173         78
                                       160  Patrice Evra                          152         73
                                       463  Ryan Shawcross                        133         56
                              FW       488  Luis Suarez                           213        105
                                       298  Rickie Lambert                        178         69
                              MF       027  Gareth Bale                           240        111
                                       452  Santi Santi Cazorla                   198         97
                                       193  Steven Gerrard                        187         92
                                       344  Miguel Michu                          169         79
                                       166  Marouane Fellaini                     168         73
                    890     2 GK       037  Asmir Begovic                         154         56
                              DF       024  Leighton Baines                       173         78
                                       160  Patrice Evra                          152         73
                                       264  Glen Johnson                          141         65
                              FW       488  Luis Suarez                           213        105
                                       298  Rickie Lambert                        178         69
                                       045  Dimitar Berbatov                      161         71
                              MF       027  Gareth Bale                           240        111
                                       452  Santi Santi Cazorla                   198         97
                                       193  Steven Gerrard                        187         92
                                       166  Marouane Fellaini                     168         73
       1963         890     3 GK       037  Asmir Begovic                         154         56
                              DF       024  Leighton Baines                       173         78
                                       160  Patrice Evra                          152         73
                                       463  Ryan Shawcross                        133         56
                              FW       488  Luis Suarez                           213        105
                                       298  Rickie Lambert                        178         69
                                       044  Christian Benteke                     166         74
                              MF       027  Gareth Bale                           240        111
                                       452  Santi Santi Cazorla                   198         97
                                       193  Steven Gerrard                        187         92
                                       344  Miguel Michu                          169         79
       1962         884     4 GK       037  Asmir Begovic                         154         56
                              DF       024  Leighton Baines                       173         78
                                       160  Patrice Evra                          152         73
                                       463  Ryan Shawcross                        133         56
                              FW       488  Luis Suarez                           213        105
                                       298  Rickie Lambert                        178         69
                                       044  Christian Benteke                     166         74
                              MF       027  Gareth Bale                           240        111
                                       452  Santi Santi Cazorla                   198         97
                                       193  Steven Gerrard                        187         92
                                       166  Marouane Fellaini                     168         73
                    885     5 GK       037  Asmir Begovic                         154         56
                              DF       024  Leighton Baines                       173         78
                                       160  Patrice Evra                          152         73
                                       264  Glen Johnson                          141         65
                              FW       488  Luis Suarez                           213        105
                                       298  Rickie Lambert                        178         69
                                       314  Romelu Lukaku                         158         66
                              MF       027  Gareth Bale                           240        111
                                       452  Santi Santi Cazorla                   198         97
                                       193  Steven Gerrard                        187         92
                                       166  Marouane Fellaini                     168         73
                    889     6 GK       037  Asmir Begovic                         154         56
                              DF       024  Leighton Baines                       173         78
                                       160  Patrice Evra                          152         73
                                       272  Sanchez Jose Enrique                  133         61
                              FW       488  Luis Suarez                           213        105
                                       298  Rickie Lambert                        178         69
                                       044  Christian Benteke                     166         74
                              MF       027  Gareth Bale                           240        111
                                       452  Santi Santi Cazorla                   198         97
                                       193  Steven Gerrard                        187         92
                                       166  Marouane Fellaini                     168         73
       1959         889     7 GK       252  Jussi Jaaskelainen                    143         52
                              DF       024  Leighton Baines                       173         78
                                       160  Patrice Evra                          152         73
                                       264  Glen Johnson                          141         65
                              FW       488  Luis Suarez                           213        105
                                       298  Rickie Lambert                        178         69
                                       044  Christian Benteke                     166         74
                              MF       027  Gareth Bale                           240        111
                                       452  Santi Santi Cazorla                   198         97
                                       193  Steven Gerrard                        187         92
                                       166  Marouane Fellaini                     168         73
       1958         887     8 GK       037  Asmir Begovic                         154         56
                              DF       024  Leighton Baines                       173         78
                                       160  Patrice Evra                          152         73
                                       463  Ryan Shawcross                        133         56
                              FW       488  Luis Suarez                           213        105
                                       298  Rickie Lambert                        178         69
                                       045  Dimitar Berbatov                      161         71
                              MF       027  Gareth Bale                           240        111
                                       452  Santi Santi Cazorla                   198         97
                                       193  Steven Gerrard                        187         92
                                       344  Miguel Michu                          169         79
       1957         881     9 GK       037  Asmir Begovic                         154         56
                              DF       024  Leighton Baines                       173         78
                                       160  Patrice Evra                          152         73
                                       463  Ryan Shawcross                        133         56
                              FW       488  Luis Suarez                           213        105
                                       298  Rickie Lambert                        178         69
                                       045  Dimitar Berbatov                      161         71
                              MF       027  Gareth Bale                           240        111
                                       452  Santi Santi Cazorla                   198         97
                                       193  Steven Gerrard                        187         92
                                       166  Marouane Fellaini                     168         73
                    886    10 GK       037  Asmir Begovic                         154         56
                              DF       024  Leighton Baines                       173         78
                                       160  Patrice Evra                          152         73
                                       272  Sanchez Jose Enrique                  133         61
                              FW       488  Luis Suarez                           213        105
                                       298  Rickie Lambert                        178         69
                                       045  Dimitar Berbatov                      161         71
                              MF       027  Gareth Bale                           240        111
                                       452  Santi Santi Cazorla                   198         97
                                       193  Steven Gerrard                        187         92
                                       166  Marouane Fellaini                     168         73

110 rows selected.

Elapsed: 00:00:00.01

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
Pop_Table_Iterate_Base_Link
old   2:   Item_Cat_Seqs.Pop_Table_Iterate_Base_Link(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Pop_Table_Iterate_Base_Link(p_keep_num      => 300,
old   3:                                             p_min_value     => &MIN_VALUE);
new   3:                                             p_min_value     => 0);
10 running sums
SQL_ID  4sxxvubzws1vx, child number 0
-------------------------------------
INSERT /*+ gather_plan_statistics INSERT_IBL */ INTO PATHS_BASE_LINK (
PATH_RNK, ITEM_RNK, LEV, TOT_PRICE, TOT_VALUE, CAT_BASE_ID,
NEXT_CAT_BASE_ID, SAME_CATS, MIN_ITEMS, CAT_BASE_SUM, PRIOR_IBL_ID,
IBL_ID ) WITH PATH_JOIN AS ( SELECT ROW_NUMBER() OVER (PARTITION BY
TRW.CAT_BASE_SUM + IRK.CAT_BASE_ID ORDER BY TRW.TOT_VALUE +
IRK.ITEM_VALUE DESC, TRW.TOT_PRICE + IRK.ITEM_PRICE) PATH_RNK,
IRK.ITEM_RNK, :B7 LEV, TRW.TOT_PRICE + IRK.ITEM_PRICE TOT_PRICE,
TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_BASE_ID,
IRK.NEXT_CAT_BASE_ID, CASE IRK.CAT_BASE_ID WHEN TRW.CAT_BASE_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CAT_BASE_SUM
+ IRK.CAT_BASE_ID CAT_BASE_SUM, TRW.IBL_ID FROM PATHS_BASE_LINK TRW
JOIN ITEMS_RANKED_BASE_LINK IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK +
1) AND (:B2 - (:B1 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE + IRK.ITEM_PRICE
+ :B6 <= :B5 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B4 >= :B3 AND
TRW.LEV < :B1 AND CASE IRK.CAT_BASE_ID WHEN TRW.CAT_BASE_ID THEN TRW
Plan hash value: 4055559726
------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
------------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |                    |      1 |        |      0 |00:00:01.05 |    3235 |       |       |          |
|   1 |  LOAD TABLE CONVENTIONAL | PATHS_BASE_LINK    |      1 |        |      0 |00:00:01.05 |    3235 |       |       |          |
|   2 |   SEQUENCE               | IBL_SEQ            |      1 |        |   2700 |00:00:00.63 |    3101 |       |       |          |
|*  3 |    VIEW                  |                    |      1 |      1 |   2700 |00:00:00.63 |    3095 |       |       |          |
|   4 |     WINDOW SORT          |                    |      1 |      1 |    633K|00:00:01.00 |    3095 |    87M|  3217K|   78M (0)|
|   5 |      NESTED LOOPS        |                    |      1 |      1 |    633K|00:00:00.42 |    3095 |       |       |          |
|*  6 |       TABLE ACCESS FULL  | PATHS_BASE_LINK    |      1 |      1 |   2700 |00:00:00.01 |      42 |       |       |          |
|*  7 |       INDEX RANGE SCAN   | SYS_IOT_TOP_177085 |   2700 |      1 |    633K|00:00:00.37 |    3053 |       |       |          |
------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
3 - filter(("PATH_RNK"<=:B8 OR :B8=0))
6 - filter("TRW"."LEV"<:B1)
7 - access("IRK"."ITEM_RNK">="TRW"."ITEM_RNK"+1 AND "IRK"."ITEM_RNK"<=:B2-(:B1-"TRW"."LEV"-1))
filter(("TRW"."TOT_PRICE"+"IRK"."ITEM_PRICE"+:B6<=:B5 AND "TRW"."TOT_VALUE"+"IRK"."ITEM_VALUE"+:B4>=:B3 AND
"IRK"."MAX_ITEMS">=CASE "IRK"."CAT_BASE_ID" WHEN "TRW"."CAT_BASE_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1 END  AND
"IRK"."MIN_REMAIN"<=:B1-("TRW"."LEV"+1)+LEAST(CASE "IRK"."CAT_BASE_ID" WHEN "TRW"."CAT_BASE_ID" THEN "TRW"."SAME_CATS"+1
ELSE 1 END ,"IRK"."MIN_ITEMS") AND ("IRK"."CAT_BASE_ID"="TRW"."CAT_BASE_ID" OR "TRW"."SAME_CATS">="TRW"."MIN_ITEMS") AND
("IRK"."CAT_BASE_ID"="TRW"."CAT_BASE_ID" OR "IRK"."CAT_BASE_ID"=NVL("TRW"."NEXT_CAT_BASE_ID","IRK"."CAT_BASE_ID"))))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Pop_Table_Iterate_Base_Link, Constructed at 09 Jun 2024 23:06:14, written at 23:06:19
================================================================================================
Timer                                 Elapsed         CPU       Calls       Ela/Call       CPU/Call
---------------------------------  ----------  ----------  ----------  -------------  -------------
Initial delete (0)                       0.01        0.01           1        0.01000        0.01000
Initial insert (1)                       0.00        0.00           1        0.00100        0.00000
Insert item_base_links  1 (1)            0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 1 (43)            0.00        0.00           1        0.00000        0.00000
Delete paths_base_Link 1 (1)             0.00        0.00           1        0.00000        0.00000
Insert item_base_links  2 (43)           0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 2 (300)           0.02        0.01           1        0.01900        0.01000
Delete paths_base_Link 2 (43)            0.00        0.00           1        0.00100        0.00000
Insert item_base_links  3 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 3 (300)           0.12        0.12           1        0.11600        0.12000
Delete paths_base_Link 3 (300)           0.00        0.00           1        0.00000        0.00000
Insert item_base_links  4 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 4 (300)           0.11        0.12           1        0.11300        0.12000
Delete paths_base_Link 4 (300)           0.00        0.00           1        0.00000        0.00000
Insert item_base_links  5 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 5 (600)           0.15        0.16           1        0.15200        0.16000
Delete paths_base_Link 5 (300)           0.00        0.00           1        0.00000        0.00000
Insert item_base_links  6 (600)          0.00        0.00           1        0.00100        0.00000
Insert paths_base_Link 6 (1200)          0.32        0.29           1        0.31700        0.29000
Delete paths_base_Link 6 (600)           0.00        0.00           1        0.00000        0.00000
Insert item_base_links  7 (1200)         0.00        0.00           1        0.00100        0.00000
Insert paths_base_Link 7 (1800)          0.55        0.55           1        0.55000        0.55000
Delete paths_base_Link 7 (1200)          0.00        0.00           1        0.00100        0.00000
Insert item_base_links  8 (1800)         0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 8 (2400)          0.77        0.76           1        0.76600        0.76000
Delete paths_base_Link 8 (1800)          0.00        0.01           1        0.00100        0.01000
Insert item_base_links  9 (2400)         0.00        0.00           1        0.00100        0.00000
Insert paths_base_Link 9 (2700)          0.95        0.95           1        0.95100        0.95000
Delete paths_base_Link 9 (2400)          0.00        0.00           1        0.00100        0.00000
Insert item_base_links  10 (2700)        0.00        0.00           1        0.00100        0.00000
Insert paths_base_Link 10 (2700)         1.26        1.26           1        1.25500        1.26000
Delete paths_base_Link 10 (2700)         0.00        0.00           1        0.00100        0.00000
Insert item_base_links  11 (2700)        0.00        0.00           1        0.00100        0.00000
Insert paths_base_Link 11 (2400)         0.75        0.75           1        0.74500        0.75000
Delete paths_base_Link 11 (2700)         0.00        0.00           1        0.00100        0.00000
(Other)                                  0.00        0.00           1        0.00000        0.00000
---------------------------------  ----------  ----------  ----------  -------------  -------------
Total                                    5.01        4.99          36        0.13906        0.13861
---------------------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00847, CPU: 0.00847]

PL/SQL procedure successfully completed.

Elapsed: 00:00:05.11

Path                              Total Value Total Price  Rank
--------------------------------- ----------- ----------- -----
037024160463488298027452193344166        1965         889     1
037024160264488298045027452193166                     890     2
037024160463488298044027452193344        1963         890     3
037024160463488298044027452193166        1962         884     4
037024160264488298314027452193166                     885     5
037024160272488298044027452193166                     889     6
252024160264488298044027452193166        1959         889     7
037024160463488298045027452193344        1958         887     8
037024160463488298045027452193166        1957         881     9
037024160463488298314027452328166                     886    10

10 rows selected.

Elapsed: 00:00:00.01

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
old   2:   Item_Cat_Seqs.Init(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Init(p_keep_num      => 300,
old   3:                      p_min_value     => &MIN_VALUE);
new   3:                      p_min_value     => 0);
10 running sums

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.01
Array_Iterate

Path                              Total Value Total Price  Rank
--------------------------------- ----------- ----------- -----
037024160463488298027452193344166        1965         889     1
037024160264488298045027452193166                     890     2
037024160463488298044027452193344        1963         890     3
037024160463488298044027452193166        1962         884     4
037024160264488298314027452193166                     885     5
037024160272488298044027452193166                     889     6
252024160264488298044027452193166        1959         889     7
037024160463488298045027452193344        1958         887     8
037024160463488298045027452193166        1957         881     9
037024160272488298045027452193166                     886    10

10 rows selected.

SQL_ID  1xxa6th1dk8zu, child number 0
-------------------------------------
WITH PATH_JOIN AS ( SELECT /*+ gather_plan_statistics ARRAY_ITERATE */
ROW_NUMBER() OVER (PARTITION BY TRW.CATS_PATH || IRK.CAT_ID ORDER BY
TRW.TOT_VALUE + IRK.ITEM_VALUE DESC, TRW.TOT_PRICE + IRK.ITEM_PRICE)
PATH_RNK, IRK.ITEM_RNK, TRW.LEV + 1 LEV, TRW.TOT_PRICE + IRK.ITEM_PRICE
TOT_PRICE, TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_ID,
IRK.NEXT_CAT_ID, CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1
ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CATS_PATH || IRK.CAT_ID
CATS_PATH, TRW.PATH || IRK.ITEM_ID PATH FROM TABLE(:B1 ) TRW JOIN
ITEMS_RANKED IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK + 1) AND
(IRK.N_ITEMS - (:B2 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE +
IRK.ITEM_PRICE + :B6 <= :B5 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B4 >=
:B3 AND TRW.LEV < :B2 AND CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END <= IRK.MAX_ITEMS AND :B2 - (TRW.LEV + 1) +
LEAST(CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1 ELSE 1
END, IRK.MIN_ITEMS) >= IRK.MIN_REMAIN AND (IRK.CAT_ID
Plan hash value: 552749601
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                            | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers | Reads  | Writes |  OMem |  1Mem | Used-Mem | Used-Tmp|
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                     |                    |      1 |        |   2700 |00:00:01.20 |    2729 |  15842 |  15842 |       |       |          |         |
|*  1 |  VIEW                                |                    |      1 |      1 |   2700 |00:00:01.20 |    2729 |  15842 |  15842 |       |       |          |         |
|   2 |   WINDOW SORT                        |                    |      1 |      1 |    633K|00:00:01.84 |    2729 |  15842 |  15842 |   139M|  3991K|   97M (1)|     124M|
|   3 |    NESTED LOOPS                      |                    |      1 |      1 |    633K|00:00:00.67 |    2726 |      0 |      0 |       |       |          |         |
|*  4 |     COLLECTION ITERATOR PICKLER FETCH|                    |      1 |      1 |   2700 |00:00:00.01 |       0 |      0 |      0 |       |       |          |         |
|*  5 |     INDEX RANGE SCAN                 | SYS_IOT_TOP_177079 |   2700 |      1 |    633K|00:00:00.62 |    2726 |      0 |      0 |       |       |          |         |
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
1 - filter(("PATH_RNK"<=:B7 OR :B7=0))
4 - filter(VALUE(KOKBF$)<:B2)
5 - access("IRK"."ITEM_RNK">=VALUE(KOKBF$)+1)
filter((VALUE(KOKBF$)+"IRK"."ITEM_PRICE"+:B6<=:B5 AND VALUE(KOKBF$)+"IRK"."ITEM_VALUE"+:B4>=:B3 AND "IRK"."ITEM_RNK"<="IRK"."N_ITEMS"-(:B2-VALUE(KOKBF$)-1)
AND ("IRK"."CAT_ID"=VALUE(KOKBF$) OR "IRK"."CAT_ID"=NVL(VALUE(KOKBF$),"IRK"."CAT_ID")) AND "IRK"."MAX_ITEMS">=CASE "IRK"."CAT_ID" WHEN VALUE(KOKBF$) THEN
VALUE(KOKBF$)+1 ELSE 1 END  AND ("IRK"."CAT_ID"=VALUE(KOKBF$) OR VALUE(KOKBF$)>=VALUE(KOKBF$)) AND "IRK"."MIN_REMAIN"<=:B2-(VALUE(KOKBF$)+1)+LEAST(CASE
"IRK"."CAT_ID" WHEN VALUE(KOKBF$) THEN VALUE(KOKBF$)+1 ELSE 1 END ,"IRK"."MIN_ITEMS")))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Array_Iterate, Constructed at 09 Jun 2024 23:06:19, written at 23:06:28
==================================================================================
Timer                    Elapsed         CPU       Calls       Ela/Call       CPU/Call
--------------------  ----------  ----------  ----------  -------------  -------------
Insert 1 (43)               0.00        0.00           1        0.00100        0.00000
Reset paths array 1         0.00        0.00           1        0.00000        0.00000
Insert 2 (300)              0.03        0.00           1        0.02800        0.00000
Reset paths array 2         0.00        0.00           1        0.00000        0.00000
Insert 3 (300)              0.18        0.19           1        0.18200        0.19000
Reset paths array 3         0.00        0.00           1        0.00000        0.00000
Insert 4 (300)              0.18        0.19           1        0.18400        0.19000
Reset paths array 4         0.00        0.00           1        0.00000        0.00000
Insert 5 (600)              0.25        0.25           1        0.24900        0.25000
Reset paths array 5         0.00        0.00           1        0.00000        0.00000
Insert 6 (1200)             0.55        0.53           1        0.54900        0.53000
Reset paths array 6         0.00        0.00           1        0.00100        0.00000
Insert 7 (1800)             0.89        0.87           1        0.89200        0.87000
Reset paths array 7         0.00        0.00           1        0.00000        0.00000
Insert 8 (2400)             1.35        1.35           1        1.35200        1.35000
Reset paths array 8         0.00        0.01           1        0.00100        0.01000
Insert 9 (2700)             1.85        1.65           1        1.85000        1.65000
Reset paths array 9         0.00        0.00           1        0.00100        0.00000
Insert 10 (1)               2.22        1.86           1        2.22000        1.86000
Reset paths array 10        0.00        0.01           1        0.00100        0.01000
Insert 11 (2400)            1.49        1.35           1        1.49200        1.35000
Pipe rows                   0.00        0.00           1        0.00200        0.00000
(Other)                     0.00        0.00           1        0.00000        0.00000
--------------------  ----------  ----------  ----------  -------------  -------------
Total                       9.01        8.26          23        0.39152        0.35913
--------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00855, CPU: 0.00855]
Elapsed: 00:00:09.12

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
Pop_Table_Recurse
old   2:   Item_Cat_Seqs.Pop_Table_Recurse(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Pop_Table_Recurse(p_keep_num      => 300,
old   3:                                   p_min_value     => &MIN_VALUE);
new   3:                                   p_min_value     => 0);
10 running sums
SQL_ID  323bar13mrwwy, child number 0
-------------------------------------
INSERT /*+ gather_plan_statistics INSERT_PATHS */ INTO PATHS (
PATH_RNK, ITEM_RNK, LEV, TOT_PRICE, TOT_VALUE, CAT_ID, NEXT_CAT_ID,
SAME_CATS, MIN_ITEMS, CATS_PATH, PATH ) WITH PATH_JOIN AS ( SELECT
ROW_NUMBER() OVER (PARTITION BY TRW.CATS_PATH || IRK.CAT_ID ORDER BY
TRW.TOT_VALUE + IRK.ITEM_VALUE DESC, TRW.TOT_PRICE + IRK.ITEM_PRICE)
PATH_RNK, IRK.ITEM_RNK, :B6 LEV, TRW.TOT_PRICE + IRK.ITEM_PRICE
TOT_PRICE, TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_ID,
IRK.NEXT_CAT_ID, CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1
ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CATS_PATH || IRK.CAT_ID
CATS_PATH, TRW.PATH || IRK.ITEM_ID PATH FROM PATHS TRW JOIN
ITEMS_RANKED IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK + 1) AND
(IRK.N_ITEMS - (:B1 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE +
IRK.ITEM_PRICE + :B5 <= :B4 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B3 >=
:B2 AND TRW.LEV < :B1 AND CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END <= IRK.MAX_ITEMS AND :B1 - (TRW.LEV + 1) +
LEAST(CAS
Plan hash value: 4022110882
----------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers | Reads  | Writes |  OMem |  1Mem | Used-Mem | Used-Tmp|
----------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |                    |      1 |        |      0 |00:00:01.61 |    3182 |  14083 |  14083 |       |       |          |         |
|   1 |  LOAD TABLE CONVENTIONAL | PATHS              |      1 |        |      0 |00:00:01.61 |    3182 |  14083 |  14083 |       |       |          |         |
|*  2 |   VIEW                   |                    |      1 |      1 |   2700 |00:00:00.92 |    2806 |  14083 |  14083 |       |       |          |         |
|   3 |    WINDOW SORT           |                    |      1 |      1 |    633K|00:00:01.40 |    2806 |  14083 |  14083 |   123M|  3776K|   97M (1)|     111M|
|   4 |     NESTED LOOPS         |                    |      1 |      1 |    633K|00:00:00.49 |    2803 |      0 |      0 |       |       |          |         |
|*  5 |      TABLE ACCESS FULL   | PATHS              |      1 |      1 |   2700 |00:00:00.01 |      77 |      0 |      0 |       |       |          |         |
|*  6 |      INDEX RANGE SCAN    | SYS_IOT_TOP_177079 |   2700 |      1 |    633K|00:00:00.44 |    2726 |      0 |      0 |       |       |          |         |
----------------------------------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
2 - filter(("PATH_RNK"<=:B7 OR :B7=0))
5 - filter("TRW"."LEV"<:B1)
6 - access("IRK"."ITEM_RNK">="TRW"."ITEM_RNK"+1)
filter(("TRW"."TOT_PRICE"+"IRK"."ITEM_PRICE"+:B5<=:B4 AND "TRW"."TOT_VALUE"+"IRK"."ITEM_VALUE"+:B3>=:B2 AND
"IRK"."ITEM_RNK"<="IRK"."N_ITEMS"-(:B1-"TRW"."LEV"-1) AND "IRK"."MAX_ITEMS">=CASE "IRK"."CAT_ID" WHEN "TRW"."CAT_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1
END  AND "IRK"."MIN_REMAIN"<=:B1-("TRW"."LEV"+1)+LEAST(CASE "IRK"."CAT_ID" WHEN "TRW"."CAT_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1 END ,"IRK"."MIN_ITEMS")
AND ("IRK"."CAT_ID"="TRW"."CAT_ID" OR "TRW"."SAME_CATS">="TRW"."MIN_ITEMS") AND ("IRK"."CAT_ID"="TRW"."CAT_ID" OR
"IRK"."CAT_ID"=NVL("TRW"."NEXT_CAT_ID","IRK"."CAT_ID"))))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Pop_Table_Recurse, Constructed at 09 Jun 2024 23:06:28, written at 23:06:35
======================================================================================
Timer                      Elapsed         CPU       Calls       Ela/Call       CPU/Call
----------------------  ----------  ----------  ----------  -------------  -------------
Initial delete (2400)         0.00        0.00           1        0.00200        0.00000
Initial insert (1)            0.00        0.00           1        0.00000        0.00000
Insert paths 1 (43)           0.00        0.00           1        0.00100        0.00000
Delete paths 1 (1)            0.00        0.00           1        0.00000        0.00000
Insert paths 2 (300)          0.03        0.02           1        0.02700        0.02000
Delete paths 2 (43)           0.00        0.00           1        0.00100        0.00000
Insert paths 3 (300)          0.15        0.16           1        0.15400        0.16000
Delete paths 3 (300)          0.00        0.00           1        0.00100        0.00000
Insert paths 4 (300)          0.17        0.17           1        0.16500        0.17000
Delete paths 4 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths 5 (600)          0.21        0.20           1        0.20800        0.20000
Delete paths 5 (300)          0.00        0.01           1        0.00100        0.01000
Insert paths 6 (1200)         0.45        0.39           1        0.44500        0.39000
Delete paths 6 (600)          0.00        0.00           1        0.00100        0.00000
Insert paths 7 (1800)         0.68        0.70           1        0.67600        0.70000
Delete paths 7 (1200)         0.00        0.00           1        0.00100        0.00000
Insert paths 8 (2400)         1.02        1.00           1        1.02000        1.00000
Delete paths 8 (1800)         0.00        0.00           1        0.00100        0.00000
Insert paths 9 (2700)         1.46        1.10           1        1.45800        1.10000
Delete paths 9 (2400)         0.00        0.00           1        0.00200        0.00000
Insert paths 10 (2700)        1.81        1.53           1        1.81400        1.53000
Delete paths 10 (2700)        0.00        0.01           1        0.00200        0.01000
Insert paths 11 (2400)        1.04        0.98           1        1.04000        0.98000
Delete paths 11 (2700)        0.00        0.01           1        0.00200        0.01000
(Other)                       0.00        0.00           1        0.00000        0.00000
----------------------  ----------  ----------  ----------  -------------  -------------
Total                         7.02        6.28          25        0.28088        0.25120
----------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00935, CPU: 0.01028]

PL/SQL procedure successfully completed.

Elapsed: 00:00:07.15

Path                              Total Value Total Price  Rank
--------------------------------- ----------- ----------- -----
037024160463488298027452193344166        1965         889     1
037024160264488298045027452193166                     890     2
037024160463488298044027452193344        1963         890     3
037024160463488298044027452193166        1962         884     4
037024160264488298314027452193166                     885     5
037024160272488298044027452193166                     889     6
252024160264488298044027452193166        1959         889     7
037024160463488298045027452193344        1958         887     8
037024160463488298045027452193166        1957         881     9
037024160463488298314027452328166                     886    10

10 rows selected.

Elapsed: 00:00:00.00

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
old   2:   Item_Cat_Seqs.Init(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Init(p_keep_num      => 300,
old   3:                      p_min_value     => &MIN_VALUE);
new   3:                      p_min_value     => 0);
10 running sums

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.01
Array_Recurse

Path                              Total Value Total Price  Rank
--------------------------------- ----------- ----------- -----
037024160463488298027452193344166        1965         889     1
037024160264488298045027452193166                     890     2
037024160463488298044027452193344        1963         890     3
037024160463488298044027452193166        1962         884     4
037024160264488298314027452193166                     885     5
037024160272488298044027452193166                     889     6
252024160264488298044027452193166        1959         889     7
037024160463488298045027452193344        1958         887     8
037024160463488298045027452193166        1957         881     9
037024160463488298314027452328166                     886    10

10 rows selected.

SQL_ID  3s128ufk13m2r, child number 0
-------------------------------------
WITH PATH_JOIN AS ( SELECT /*+ gather_plan_statistics ARRAY_RECURSE */
ROW_NUMBER() OVER (PARTITION BY TRW.CATS_PATH || IRK.CAT_ID ORDER BY
TRW.TOT_VALUE + IRK.ITEM_VALUE DESC, TRW.TOT_PRICE + IRK.ITEM_PRICE)
PATH_RNK, IRK.ITEM_RNK, TRW.LEV + 1 LEV, TRW.TOT_PRICE + IRK.ITEM_PRICE
TOT_PRICE, TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_ID,
IRK.NEXT_CAT_ID, CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1
ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CATS_PATH || IRK.CAT_ID
CATS_PATH, TRW.PATH || IRK.ITEM_ID PATH FROM
ITEM_CAT_SEQS.ARRAY_RECURSE(P_TIMER_SET => :B1 , P_LEV => NVL(:B2 , :B3
) - 1) TRW JOIN ITEMS_RANKED IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK
+ 1) AND (IRK.N_ITEMS - (:B3 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE +
IRK.ITEM_PRICE + :B7 <= :B6 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B5 >=
:B4 AND TRW.LEV < :B3 AND CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END <= IRK.MAX_ITEMS AND :B3 - (TRW.LEV + 1) +
LEAST(CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CAT
Plan hash value: 2949182022
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                             | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers | Reads  | Writes |  OMem |  1Mem | Used-Mem | Used-Tmp|
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                      |                    |      1 |        |   2700 |00:00:06.53 |      78 |  26060 |  26060 |       |       |          |         |
|*  1 |  VIEW                                 |                    |      1 |      1 |   2700 |00:00:06.53 |      78 |  26060 |  26060 |       |       |          |         |
|   2 |   WINDOW SORT                         |                    |      1 |      1 |    633K|00:00:07.16 |      78 |  26060 |  26060 |   120M|  3722K|   97M (1)|     107M|
|   3 |    MERGE JOIN                         |                    |      1 |      1 |    633K|00:00:06.03 |      75 |  12403 |  12403 |       |       |          |         |
|   4 |     SORT JOIN                         |                    |      1 |    408 |   2700 |00:00:05.30 |      68 |  12403 |  12403 |   372K|   372K|  330K (0)|         |
|*  5 |      COLLECTION ITERATOR PICKLER FETCH| ARRAY_RECURSE      |      1 |    408 |   2700 |00:00:04.52 |      68 |  12403 |  12403 |       |       |          |         |
|*  6 |     FILTER                            |                    |   2700 |        |    633K|00:00:00.70 |       7 |      0 |      0 |       |       |          |         |
|*  7 |      SORT JOIN                        |                    |   2700 |    560 |    670K|00:00:00.12 |       7 |      0 |      0 |   124K|   124K|  110K (0)|         |
|   8 |       INDEX FAST FULL SCAN            | SYS_IOT_TOP_177079 |      1 |    560 |    560 |00:00:00.01 |       7 |      0 |      0 |       |       |          |         |
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
1 - filter(("PATH_RNK"<=:B8 OR :B8=0))
5 - filter(VALUE(KOKBF$)<:B3)
6 - filter((VALUE(KOKBF$)+"IRK"."ITEM_PRICE"+:B7<=:B6 AND VALUE(KOKBF$)+"IRK"."ITEM_VALUE"+:B5>=:B4 AND "IRK"."ITEM_RNK"<="IRK"."N_ITEMS"-(:B3-VALUE(KOKBF$)-1)
AND ("IRK"."CAT_ID"=VALUE(KOKBF$) OR "IRK"."CAT_ID"=NVL(VALUE(KOKBF$),"IRK"."CAT_ID")) AND "IRK"."MAX_ITEMS">=CASE "IRK"."CAT_ID" WHEN VALUE(KOKBF$) THEN
VALUE(KOKBF$)+1 ELSE 1 END  AND ("IRK"."CAT_ID"=VALUE(KOKBF$) OR VALUE(KOKBF$)>=VALUE(KOKBF$)) AND "IRK"."MIN_REMAIN"<=:B3-(VALUE(KOKBF$)+1)+LEAST(CASE
"IRK"."CAT_ID" WHEN VALUE(KOKBF$) THEN VALUE(KOKBF$)+1 ELSE 1 END ,"IRK"."MIN_ITEMS")))
7 - access("IRK"."ITEM_RNK">=VALUE(KOKBF$)+1)
filter("IRK"."ITEM_RNK">=VALUE(KOKBF$)+1)
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Array_Recurse, Constructed at 09 Jun 2024 23:06:36, written at 23:06:44
==================================================================================
Timer                        Elapsed         CPU       Calls       Ela/Call       CPU/Call
------------------------  ----------  ----------  ----------  -------------  -------------
Recurse level: 1 (43)           0.00        0.00           1        0.00200        0.00000
Recurse level: 2 (300)          0.03        0.02           1        0.03000        0.02000
Recurse level: 3 (300)          0.20        0.21           1        0.19500        0.21000
Recurse level: 4 (300)          0.19        0.17           1        0.18900        0.17000
Recurse level: 5 (600)          0.26        0.25           1        0.26400        0.25000
Recurse level: 6 (1200)         0.54        0.53           1        0.53500        0.53000
Recurse level: 7 (1800)         0.88        0.88           1        0.88000        0.88000
Recurse level: 8 (2400)         1.32        1.34           1        1.32400        1.34000
Recurse level: 9 (2700)         1.88        1.60           1        1.87700        1.60000
Recurse level: 10 (2700)        2.26        1.92           1        2.25800        1.92000
Recurse level: 11 (2400)        1.36        1.37           1        1.36400        1.37000
(Other)                         0.00        0.00           1        0.00000        0.00000
------------------------  ----------  ----------  ----------  -------------  -------------
Total                           8.92        8.29          12        0.74317        0.69083
------------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00870, CPU: 0.00870]
Elapsed: 00:00:09.03

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
Timer Set: Item_Cat_Seqs, Constructed at 09 Jun 2024 23:05:54, written at 23:06:45
==================================================================================
Timer                                   Elapsed         CPU       Calls       Ela/Call       CPU/Call
-----------------------------------  ----------  ----------  ----------  -------------  -------------
Pop_Table_Iterate                          7.14        6.38           1        7.13600        6.38000
Solutions by Category                      0.01        0.00           1        0.00700        0.00000
Pop_Table_Iterate_Base                     6.49        6.01           1        6.48700        6.01000
Pop_Table_Iterate_Link                     6.21        5.82           1        6.21000        5.82000
Pop_Table_Iterate_Link - item level        0.02        0.01           1        0.01900        0.01000
Pop_Table_Iterate_Base_Link                5.13        5.10           1        5.13400        5.10000
Array_Iterate                              9.13        8.37           1        9.13000        8.37000
Pop_Table_Recurse                          7.16        6.39           1        7.15900        6.39000
Array_Recurse                              9.05        8.40           1        9.04500        8.40000
(Other)                                    0.00        0.01           1        0.00200        0.01000
-----------------------------------  ----------  ----------  ----------  -------------  -------------
Total                                     50.33       46.49          10        5.03290        4.64900
-----------------------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00990, CPU: 0.00990]

PL/SQL procedure successfully completed.


'END:'||TO_CHAR(SYSDATE,'DD-MON-YY
----------------------------------
End: 09-JUN-2024 23:06:45

