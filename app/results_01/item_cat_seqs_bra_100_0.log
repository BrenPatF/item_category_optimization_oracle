
Database             Time                 Version
-------------------- -------------------- ------------------------------
Start: ORCL          09-JUN-2024 15:54:05 Version 21.3.0.0.0

Recompile item_cat_seqs.pkb

Package body created.

No errors.
Just set context values: SEQ_SIZE = 12, MAX_PRICE = 19000, ITEM_WIDTH = 3, TOP_N = 10
Previously set context values: SEQ_TYPE = , MIN_VALUE = 0, KEEP_NUM = 10

PL/SQL procedure successfully completed.


PL/SQL procedure successfully completed.

Pop_Table_Iterate
old   2:   Item_Cat_Seqs.Pop_Table_Iterate(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Pop_Table_Iterate(p_keep_num      => 100,
old   3:                                   p_min_value     => &MIN_VALUE);
new   3:                                   p_min_value     => 0);
11 running sums
SQL_ID  323bar13mrwwy, child number 0
-------------------------------------
INSERT /*+ gather_plan_statistics INSERT_PATHS */ INTO PATHS (
PATH_RNK, ITEM_RNK, LEV, TOT_PRICE, TOT_VALUE, CAT_ID, NEXT_CAT_ID,
SAME_CATS, MIN_ITEMS, CATS_PATH, PATH ) WITH PATH_JOIN AS ( SELECT
ROW_NUMBER() OVER (PARTITION BY TRW.CATS_PATH || IRK.CAT_ID ORDER BY
TRW.TOT_VALUE + IRK.ITEM_VALUE DESC, TRW.TOT_PRICE + IRK.ITEM_PRICE)
PATH_RNK, IRK.ITEM_RNK, :B6 LEV, TRW.TOT_PRICE + IRK.ITEM_PRICE
TOT_PRICE, TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_ID,
IRK.NEXT_CAT_ID, CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1
ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CATS_PATH || IRK.CAT_ID
CATS_PATH, TRW.PATH || IRK.ITEM_ID PATH FROM PATHS TRW JOIN
ITEMS_RANKED IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK + 1) AND
(IRK.N_ITEMS - (:B1 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE +
IRK.ITEM_PRICE + :B5 <= :B4 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B3 >=
:B2 AND TRW.LEV < :B1 AND CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END <= IRK.MAX_ITEMS AND :B1 - (TRW.LEV + 1) +
LEAST(CAS
Plan hash value: 1905266298
------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
------------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |                    |      1 |        |      0 |00:00:00.04 |      94 |       |       |          |
|   1 |  LOAD TABLE CONVENTIONAL | PATHS              |      1 |        |      0 |00:00:00.04 |      94 |       |       |          |
|*  2 |   VIEW                   |                    |      1 |      1 |   1000 |00:00:00.02 |      20 |       |       |          |
|   3 |    WINDOW SORT           |                    |      1 |      1 |  17496 |00:00:00.04 |      20 |  3809K|   839K| 3385K (0)|
|   4 |     NESTED LOOPS         |                    |      1 |      1 |  17496 |00:00:00.02 |      20 |       |       |          |
|*  5 |      TABLE ACCESS FULL   | PATHS              |      1 |      1 |    600 |00:00:00.01 |      17 |       |       |          |
|*  6 |      INDEX RANGE SCAN    | SYS_IOT_TOP_176995 |    600 |      1 |  17496 |00:00:00.01 |       3 |       |       |          |
------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
2 - filter(("PATH_RNK"<=:B7 OR :B7=0))
5 - filter("TRW"."LEV"<:B1)
6 - access("IRK"."ITEM_RNK">="TRW"."ITEM_RNK"+1)
filter(("TRW"."TOT_PRICE"+"IRK"."ITEM_PRICE"+:B5<=:B4 AND "TRW"."TOT_VALUE"+"IRK"."ITEM_VALUE"+:B3>=:B2 AND
"IRK"."ITEM_RNK"<="IRK"."N_ITEMS"-(:B1-"TRW"."LEV"-1) AND "IRK"."MAX_ITEMS">=CASE "IRK"."CAT_ID" WHEN "TRW"."CAT_ID" THEN
"TRW"."SAME_CATS"+1 ELSE 1 END  AND "IRK"."MIN_REMAIN"<=:B1-("TRW"."LEV"+1)+LEAST(CASE "IRK"."CAT_ID" WHEN "TRW"."CAT_ID"
THEN "TRW"."SAME_CATS"+1 ELSE 1 END ,"IRK"."MIN_ITEMS") AND ("IRK"."CAT_ID"="TRW"."CAT_ID" OR
"TRW"."SAME_CATS">="TRW"."MIN_ITEMS") AND ("IRK"."CAT_ID"="TRW"."CAT_ID" OR
"IRK"."CAT_ID"=NVL("TRW"."NEXT_CAT_ID","IRK"."CAT_ID"))))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Pop_Table_Iterate, Constructed at 09 Jun 2024 15:54:05, written at 15:54:05
======================================================================================
Timer                      Elapsed         CPU       Calls       Ela/Call       CPU/Call
----------------------  ----------  ----------  ----------  -------------  -------------
Initial delete (0)            0.00        0.00           1        0.00400        0.00000
Initial insert (1)            0.00        0.00           1        0.00000        0.00000
Insert paths 1 (20)           0.00        0.00           1        0.00000        0.00000
Delete paths 1 (1)            0.00        0.00           1        0.00000        0.00000
Insert paths 2 (100)          0.00        0.00           1        0.00200        0.00000
Delete paths 2 (20)           0.00        0.00           1        0.00000        0.00000
Insert paths 3 (100)          0.01        0.00           1        0.00800        0.00000
Delete paths 3 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths 4 (100)          0.01        0.01           1        0.00600        0.01000
Delete paths 4 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths 5 (200)          0.01        0.01           1        0.00900        0.01000
Delete paths 5 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths 6 (200)          0.01        0.00           1        0.01300        0.00000
Delete paths 6 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths 7 (200)          0.01        0.03           1        0.01200        0.03000
Delete paths 7 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths 8 (300)          0.02        0.02           1        0.01500        0.02000
Delete paths 8 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths 9 (600)          0.03        0.02           1        0.03000        0.02000
Delete paths 9 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths 10 (1000)        0.24        0.24           1        0.23700        0.24000
Delete paths 10 (600)         0.00        0.00           1        0.00000        0.00000
Insert paths 11 (1300)        0.05        0.04           1        0.04800        0.04000
Delete paths 11 (1000)        0.00        0.00           1        0.00100        0.00000
Insert paths 12 (1300)        0.04        0.04           1        0.04000        0.04000
Delete paths 12 (1300)        0.00        0.00           1        0.00100        0.00000
(Other)                       0.00        0.00           1        0.00000        0.00000
----------------------  ----------  ----------  ----------  -------------  -------------
Total                         0.43        0.41          27        0.01578        0.01519
----------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00877, CPU: 0.00965]

PL/SQL procedure successfully completed.


Path                                 Total Value Total Price  Rank
------------------------------------ ----------- ----------- -----
078022098099058059060001002003038039       10923       18176     1
078023098099058059060001002003038039       10905       18795     2
078022098102058059060001002003038039       10833       18994     3
078022098099058059060001002003038040       10825       18190     4
078023098099058059060001002003038040       10807       18809     5
078022098099058059061001002003038039       10791       18915     6
078022098099058059060001002004038039       10790       17201     7
078021098099058059060001002004038039                   18052     8
078023098099058059060001002004038039       10772       17820     9
078022098099058059060001002003038041       10766       17948    10

10 rows selected.


PL/SQL procedure successfully completed.

Solutions by Category

Total Value Total Price  Rank Position Min Actual  Max Player List
----------- ----------- ----- -------- --- ------- --- -------------------------
      10923       18176     1 CB       2    <-2    3   098, 099
                              CO       1    <-1->  1   078
                              FW       1      3->  3   001, 002, 003
                              GK       1    <-1->  1   022
                              MF       3    <-3    5   058, 059, 060
                              WB       0      2->  2   038, 039
      10905       18795     2 CB       2    <-2    3   098, 099
                              CO       1    <-1->  1   078
                              FW       1      3->  3   001, 002, 003
                              GK       1    <-1->  1   023
                              MF       3    <-3    5   058, 059, 060
                              WB       0      2->  2   038, 039
      10833       18994     3 CB       2    <-2    3   098, 102
                              CO       1    <-1->  1   078
                              FW       1      3->  3   001, 002, 003
                              GK       1    <-1->  1   022
                              MF       3    <-3    5   058, 059, 060
                              WB       0      2->  2   038, 039
      10825       18190     4 CB       2    <-2    3   098, 099
                              CO       1    <-1->  1   078
                              FW       1      3->  3   001, 002, 003
                              GK       1    <-1->  1   022
                              MF       3    <-3    5   058, 059, 060
                              WB       0      2->  2   038, 040
      10807       18809     5 CB       2    <-2    3   098, 099
                              CO       1    <-1->  1   078
                              FW       1      3->  3   001, 002, 003
                              GK       1    <-1->  1   023
                              MF       3    <-3    5   058, 059, 060
                              WB       0      2->  2   038, 040
      10791       18915     6 CB       2    <-2    3   098, 099
                              CO       1    <-1->  1   078
                              FW       1      3->  3   001, 002, 003
                              GK       1    <-1->  1   022
                              MF       3    <-3    5   058, 059, 061
                              WB       0      2->  2   038, 039
      10790       17201     7 CB       2    <-2    3   098, 099
                              CO       1    <-1->  1   078
                              FW       1      3->  3   001, 002, 004
                              GK       1    <-1->  1   022
                              MF       3    <-3    5   058, 059, 060
                              WB       0      2->  2   038, 039
                  18052     8 CB       2    <-2    3   098, 099
                              CO       1    <-1->  1   078
                              FW       1      3->  3   001, 002, 004
                              GK       1    <-1->  1   021
                              MF       3    <-3    5   058, 059, 060
                              WB       0      2->  2   038, 039
      10772       17820     9 CB       2    <-2    3   098, 099
                              CO       1    <-1->  1   078
                              FW       1      3->  3   001, 002, 004
                              GK       1    <-1->  1   023
                              MF       3    <-3    5   058, 059, 060
                              WB       0      2->  2   038, 039
      10766       17948    10 CB       2    <-2    3   098, 099
                              CO       1    <-1->  1   078
                              FW       1      3->  3   001, 002, 003
                              GK       1    <-1->  1   022
                              MF       3    <-3    5   058, 059, 060
                              WB       0      2->  2   038, 041

60 rows selected.


PL/SQL procedure successfully completed.

Pop_Table_Iterate_Base
old   2:   Item_Cat_Seqs.Pop_Table_Iterate_Base(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Pop_Table_Iterate_Base(p_keep_num      => 100,
old   3:                                        p_min_value     => &MIN_VALUE);
new   3:                                        p_min_value     => 0);
11 running sums
SQL_ID  3qrdzuqh0vtjf, child number 0
-------------------------------------
INSERT /*+ gather_plan_statistics INSERT_PATHS */ INTO PATHS_BASE (
PATH_RNK, ITEM_RNK, LEV, TOT_PRICE, TOT_VALUE, CAT_BASE_ID,
NEXT_CAT_BASE_ID, SAME_CATS, MIN_ITEMS, CAT_BASE_SUM, PATH ) WITH
PATH_JOIN AS ( SELECT ROW_NUMBER() OVER (PARTITION BY TRW.CAT_BASE_SUM
+ IRK.CAT_BASE_ID ORDER BY TRW.TOT_VALUE + IRK.ITEM_VALUE DESC,
TRW.TOT_PRICE + IRK.ITEM_PRICE) PATH_RNK, IRK.ITEM_RNK, :B6 LEV,
TRW.TOT_PRICE + IRK.ITEM_PRICE TOT_PRICE, TRW.TOT_VALUE +
IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_BASE_ID, IRK.NEXT_CAT_BASE_ID, CASE
IRK.CAT_BASE_ID WHEN TRW.CAT_BASE_ID THEN TRW.SAME_CATS + 1 ELSE 1 END
SAME_CATS, IRK.MIN_ITEMS, TRW.CAT_BASE_SUM + IRK.CAT_BASE_ID
CAT_BASE_SUM, TRW.PATH || IRK.ITEM_ID PATH FROM PATHS_BASE TRW JOIN
ITEMS_RANKED_BASE IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK + 1) AND
(IRK.N_ITEMS - (:B1 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE +
IRK.ITEM_PRICE + :B5 <= :B4 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B3 >=
:B2 AND TRW.LEV < :B1 AND CASE IRK.CAT_BASE_ID WHEN TRW.CAT_BASE_ID
THEN TRW.SA
Plan hash value: 739200944
------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
------------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |                    |      1 |        |      0 |00:00:00.04 |      84 |       |       |          |
|   1 |  LOAD TABLE CONVENTIONAL | PATHS_BASE         |      1 |        |      0 |00:00:00.04 |      84 |       |       |          |
|*  2 |   VIEW                   |                    |      1 |      1 |   1000 |00:00:00.02 |      15 |       |       |          |
|   3 |    WINDOW SORT           |                    |      1 |      1 |  17496 |00:00:00.03 |      15 |  3242K|   792K| 2881K (0)|
|   4 |     NESTED LOOPS         |                    |      1 |      1 |  17496 |00:00:00.01 |      15 |       |       |          |
|*  5 |      TABLE ACCESS FULL   | PATHS_BASE         |      1 |      1 |    600 |00:00:00.01 |      12 |       |       |          |
|*  6 |      INDEX RANGE SCAN    | SYS_IOT_TOP_176997 |    600 |      1 |  17496 |00:00:00.01 |       3 |       |       |          |
------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
2 - filter(("PATH_RNK"<=:B7 OR :B7=0))
5 - filter("TRW"."LEV"<:B1)
6 - access("IRK"."ITEM_RNK">="TRW"."ITEM_RNK"+1)
filter(("TRW"."TOT_PRICE"+"IRK"."ITEM_PRICE"+:B5<=:B4 AND "TRW"."TOT_VALUE"+"IRK"."ITEM_VALUE"+:B3>=:B2 AND
"IRK"."ITEM_RNK"<="IRK"."N_ITEMS"-(:B1-"TRW"."LEV"-1) AND "IRK"."MAX_ITEMS">=CASE "IRK"."CAT_BASE_ID" WHEN
"TRW"."CAT_BASE_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1 END  AND "IRK"."MIN_REMAIN"<=:B1-("TRW"."LEV"+1)+LEAST(CASE
"IRK"."CAT_BASE_ID" WHEN "TRW"."CAT_BASE_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1 END ,"IRK"."MIN_ITEMS") AND
("IRK"."CAT_BASE_ID"="TRW"."CAT_BASE_ID" OR "TRW"."SAME_CATS">="TRW"."MIN_ITEMS") AND
("IRK"."CAT_BASE_ID"="TRW"."CAT_BASE_ID" OR "IRK"."CAT_BASE_ID"=NVL("TRW"."NEXT_CAT_BASE_ID","IRK"."CAT_BASE_ID"))))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Pop_Table_Iterate_Base, Constructed at 09 Jun 2024 15:54:05, written at 15:54:06
===========================================================================================
Timer                           Elapsed         CPU       Calls       Ela/Call       CPU/Call
---------------------------  ----------  ----------  ----------  -------------  -------------
Initial delete (0)                 0.01        0.00           1        0.00600        0.00000
Initial insert (1)                 0.00        0.00           1        0.00000        0.00000
Insert paths_Base 1 (20)           0.00        0.00           1        0.00100        0.00000
Delete paths_Base 1 (1)            0.00        0.00           1        0.00000        0.00000
Insert paths_Base 2 (100)          0.00        0.00           1        0.00200        0.00000
Delete paths_Base 2 (20)           0.00        0.00           1        0.00000        0.00000
Insert paths_Base 3 (100)          0.01        0.00           1        0.00700        0.00000
Delete paths_Base 3 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths_Base 4 (100)          0.01        0.01           1        0.00500        0.01000
Delete paths_Base 4 (100)          0.00        0.00           1        0.00100        0.00000
Insert paths_Base 5 (200)          0.01        0.00           1        0.00800        0.00000
Delete paths_Base 5 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths_Base 6 (200)          0.01        0.01           1        0.01200        0.01000
Delete paths_Base 6 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths_Base 7 (200)          0.01        0.01           1        0.01200        0.01000
Delete paths_Base 7 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths_Base 8 (300)          0.01        0.02           1        0.01300        0.02000
Delete paths_Base 8 (200)          0.00        0.00           1        0.00100        0.00000
Insert paths_Base 9 (600)          0.02        0.02           1        0.02300        0.02000
Delete paths_Base 9 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths_Base 10 (1000)        0.24        0.25           1        0.23700        0.25000
Delete paths_Base 10 (600)         0.00        0.00           1        0.00100        0.00000
Insert paths_Base 11 (1300)        0.05        0.04           1        0.04600        0.04000
Delete paths_Base 11 (1000)        0.00        0.00           1        0.00100        0.00000
Insert paths_Base 12 (1300)        0.04        0.03           1        0.03900        0.03000
Delete paths_Base 12 (1300)        0.00        0.00           1        0.00000        0.00000
(Other)                            0.00        0.00           1        0.00000        0.00000
---------------------------  ----------  ----------  ----------  -------------  -------------
Total                              0.42        0.39          27        0.01537        0.01444
---------------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00877, CPU: 0.00965]

PL/SQL procedure successfully completed.


Path                                 Total Value Total Price  Rank
------------------------------------ ----------- ----------- -----
078022098099058059060001002003038039       10923       18176     1
078023098099058059060001002003038039       10905       18795     2
078022098102058059060001002003038039       10833       18994     3
078022098099058059060001002003038040       10825       18190     4
078023098099058059060001002003038040       10807       18809     5
078022098099058059061001002003038039       10791       18915     6
078022098099058059060001002004038039       10790       17201     7
078021098099058059060001002004038039                   18052     8
078023098099058059060001002004038039       10772       17820     9
078022098099058059060001002003038041       10766       17948    10

10 rows selected.


PL/SQL procedure successfully completed.

Pop_Table_Iterate_Link
old   2:   Item_Cat_Seqs.Pop_Table_Iterate_Link(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Pop_Table_Iterate_Link(p_keep_num      => 100,
old   3:                                        p_min_value     => &MIN_VALUE);
new   3:                                        p_min_value     => 0);
11 running sums
SQL_ID  cyyssj0zrc1d8, child number 0
-------------------------------------
INSERT /*+ gather_plan_statistics INSERT_ILN */ INTO PATHS_LINK (
PATH_RNK, ITEM_RNK, LEV, TOT_PRICE, TOT_VALUE, CAT_ID, NEXT_CAT_ID,
SAME_CATS, MIN_ITEMS, CATS_PATH, PRIOR_ILN_ID, ILN_ID ) WITH PATH_JOIN
AS ( SELECT ROW_NUMBER() OVER (PARTITION BY TRW.CATS_PATH || IRK.CAT_ID
ORDER BY TRW.TOT_VALUE + IRK.ITEM_VALUE DESC, TRW.TOT_PRICE +
IRK.ITEM_PRICE) PATH_RNK, IRK.ITEM_RNK, :B7 LEV, TRW.TOT_PRICE +
IRK.ITEM_PRICE TOT_PRICE, TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE,
IRK.CAT_ID, IRK.NEXT_CAT_ID, CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CATS_PATH ||
IRK.CAT_ID CATS_PATH, TRW.ILN_ID FROM PATHS_LINK TRW JOIN
ITEMS_RANKED_LINK IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK + 1) AND
(:B2 - (:B1 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE + IRK.ITEM_PRICE + :B6
<= :B5 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B4 >= :B3 AND TRW.LEV <
:B1 AND CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1 ELSE 1
END <= IRK.MAX_ITEMS AND :B1 - (TRW.LEV + 1) + LEAST(
Plan hash value: 3478726606
------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
------------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |                    |      1 |        |      0 |00:00:00.04 |      67 |       |       |          |
|   1 |  LOAD TABLE CONVENTIONAL | PATHS_LINK         |      1 |        |      0 |00:00:00.04 |      67 |       |       |          |
|   2 |   SEQUENCE               | ILN_SEQ            |      1 |        |   1000 |00:00:00.02 |      15 |       |       |          |
|*  3 |    VIEW                  |                    |      1 |      1 |   1000 |00:00:00.02 |      15 |       |       |          |
|   4 |     WINDOW SORT          |                    |      1 |      1 |  17496 |00:00:00.03 |      15 |  3171K|   785K| 2818K (0)|
|   5 |      NESTED LOOPS        |                    |      1 |      1 |  17496 |00:00:00.02 |      15 |       |       |          |
|*  6 |       TABLE ACCESS FULL  | PATHS_LINK         |      1 |      1 |    600 |00:00:00.01 |      12 |       |       |          |
|*  7 |       INDEX RANGE SCAN   | SYS_IOT_TOP_176999 |    600 |      1 |  17496 |00:00:00.01 |       3 |       |       |          |
------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
3 - filter(("PATH_RNK"<=:B8 OR :B8=0))
6 - filter("TRW"."LEV"<:B1)
7 - access("IRK"."ITEM_RNK">="TRW"."ITEM_RNK"+1 AND "IRK"."ITEM_RNK"<=:B2-(:B1-"TRW"."LEV"-1))
filter(("TRW"."TOT_PRICE"+"IRK"."ITEM_PRICE"+:B6<=:B5 AND "TRW"."TOT_VALUE"+"IRK"."ITEM_VALUE"+:B4>=:B3 AND
"IRK"."MAX_ITEMS">=CASE "IRK"."CAT_ID" WHEN "TRW"."CAT_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1 END  AND
"IRK"."MIN_REMAIN"<=:B1-("TRW"."LEV"+1)+LEAST(CASE "IRK"."CAT_ID" WHEN "TRW"."CAT_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1 END
,"IRK"."MIN_ITEMS") AND ("IRK"."CAT_ID"="TRW"."CAT_ID" OR "TRW"."SAME_CATS">="TRW"."MIN_ITEMS") AND
("IRK"."CAT_ID"="TRW"."CAT_ID" OR "IRK"."CAT_ID"=NVL("TRW"."NEXT_CAT_ID","IRK"."CAT_ID"))))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Pop_Table_Iterate_Link, Constructed at 09 Jun 2024 15:54:06, written at 15:54:06
===========================================================================================
Timer                            Elapsed         CPU       Calls       Ela/Call       CPU/Call
----------------------------  ----------  ----------  ----------  -------------  -------------
Initial delete (0)                  0.01        0.00           1        0.00500        0.00000
Initial insert (1)                  0.00        0.00           1        0.00000        0.00000
Insert item_links  1 (1)            0.00        0.00           1        0.00000        0.00000
Insert paths_Link 1 (20)            0.00        0.00           1        0.00100        0.00000
Delete paths_Link 1 (1)             0.00        0.00           1        0.00000        0.00000
Insert item_links  2 (20)           0.00        0.00           1        0.00000        0.00000
Insert paths_Link 2 (100)           0.00        0.00           1        0.00200        0.00000
Delete paths_Link 2 (20)            0.00        0.00           1        0.00000        0.00000
Insert item_links  3 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths_Link 3 (100)           0.01        0.00           1        0.00500        0.00000
Delete paths_Link 3 (100)           0.00        0.00           1        0.00100        0.00000
Insert item_links  4 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths_Link 4 (100)           0.01        0.02           1        0.00500        0.02000
Delete paths_Link 4 (100)           0.00        0.00           1        0.00000        0.00000
Insert item_links  5 (100)          0.00        0.00           1        0.00100        0.00000
Insert paths_Link 5 (200)           0.01        0.01           1        0.00700        0.01000
Delete paths_Link 5 (100)           0.00        0.00           1        0.00100        0.00000
Insert item_links  6 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths_Link 6 (200)           0.01        0.01           1        0.01100        0.01000
Delete paths_Link 6 (200)           0.00        0.00           1        0.00000        0.00000
Insert item_links  7 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths_Link 7 (200)           0.01        0.02           1        0.01000        0.02000
Delete paths_Link 7 (200)           0.00        0.00           1        0.00000        0.00000
Insert item_links  8 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths_Link 8 (300)           0.01        0.00           1        0.01300        0.00000
Delete paths_Link 8 (200)           0.00        0.00           1        0.00000        0.00000
Insert item_links  9 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths_Link 9 (600)           0.02        0.03           1        0.02300        0.03000
Delete paths_Link 9 (300)           0.00        0.00           1        0.00000        0.00000
Insert item_links  10 (600)         0.00        0.00           1        0.00000        0.00000
Insert paths_Link 10 (1000)         0.23        0.22           1        0.23400        0.22000
Delete paths_Link 10 (600)          0.00        0.01           1        0.00000        0.01000
Insert item_links  11 (1000)        0.00        0.00           1        0.00100        0.00000
Insert paths_Link 11 (1300)         0.05        0.04           1        0.04600        0.04000
Delete paths_Link 11 (1000)         0.00        0.00           1        0.00100        0.00000
Insert item_links  12 (1300)        0.00        0.00           1        0.00000        0.00000
Insert paths_Link 12 (1300)         0.04        0.04           1        0.03900        0.04000
Delete paths_Link 12 (1300)         0.00        0.00           1        0.00100        0.00000
(Other)                             0.00        0.00           1        0.00000        0.00000
----------------------------  ----------  ----------  ----------  -------------  -------------
Total                               0.41        0.40          39        0.01044        0.01026
----------------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00926, CPU: 0.00926]

PL/SQL procedure successfully completed.


Path                                 Total Value Total Price  Rank
------------------------------------ ----------- ----------- -----
078022098099058059060001002003038039       10923       18176     1
078023098099058059060001002003038039       10905       18795     2
078022098102058059060001002003038039       10833       18994     3
078022098099058059060001002003038040       10825       18190     4
078023098099058059060001002003038040       10807       18809     5
078022098099058059061001002003038039       10791       18915     6
078022098099058059060001002004038039       10790       17201     7
078021098099058059060001002004038039                   18052     8
078023098099058059060001002004038039       10772       17820     9
078022098099058059060001002003038041       10766       17948    10

10 rows selected.


PL/SQL procedure successfully completed.

old   2:      Item_Cat_Seqs.Set_Contexts(p_keep_num      => &KEEP_NUM,
new   2:      Item_Cat_Seqs.Set_Contexts(p_keep_num      => 100,
old   3:                                 p_min_value     => &MIN_VALUE);
new   3:                                 p_min_value     => 0);
Just set context values: MIN_VALUE = 0, KEEP_NUM = 100
Previously set context values: SEQ_TYPE = , SEQ_SIZE = 12, MAX_PRICE = 19000, ITEM_WIDTH = 3, TOP_N = 10

PL/SQL procedure successfully completed.

paths_link_ranked_item_v - item level

Total Value Total Price  Rank Position Item Player                              Value      Price
----------- ----------- ----- -------- ---- ------------------------------ ---------- ----------
      10923       18176     1 CO       078  Jaime De AlMFda                       803       1156
                              GK       022  Wilson                                794       1239
                              CB       098  Digão                                 927        931
                                       099  Samir                                 680        267
                              MF       058  Fred                                  892       3028
                                       059  Zé Roberto                            878       2593
                                       060  Otavinho                              807        762
                              FW       001  Éderson                              1012       1712
                                       002  Maxi Biancucchi                      1005       1962
                                       003  Rafael Sobis                          955       2303
                              WB       038  Ivan                                 1320        755
                                       039  Elsinho                               850       1468
      10905       18795     2 CO       078  Jaime De AlMFda                       803       1156
                              GK       023  Vanderlei                             776       1858
                              CB       098  Digão                                 927        931
                                       099  Samir                                 680        267
                              MF       058  Fred                                  892       3028
                                       059  Zé Roberto                            878       2593
                                       060  Otavinho                              807        762
                              FW       001  Éderson                              1012       1712
                                       002  Maxi Biancucchi                      1005       1962
                                       003  Rafael Sobis                          955       2303
                              WB       038  Ivan                                 1320        755
                                       039  Elsinho                               850       1468
      10833       18994     3 CO       078  Jaime De AlMFda                       803       1156
                              GK       022  Wilson                                794       1239
                              CB       098  Digão                                 927        931
                                       102  Bressan                               590       1085
                              MF       058  Fred                                  892       3028
                                       059  Zé Roberto                            878       2593
                                       060  Otavinho                              807        762
                              FW       001  Éderson                              1012       1712
                                       002  Maxi Biancucchi                      1005       1962
                                       003  Rafael Sobis                          955       2303
                              WB       038  Ivan                                 1320        755
                                       039  Elsinho                               850       1468
      10825       18190     4 CO       078  Jaime De AlMFda                       803       1156
                              GK       022  Wilson                                794       1239
                              CB       098  Digão                                 927        931
                                       099  Samir                                 680        267
                              MF       058  Fred                                  892       3028
                                       059  Zé Roberto                            878       2593
                                       060  Otavinho                              807        762
                              FW       001  Éderson                              1012       1712
                                       002  Maxi Biancucchi                      1005       1962
                                       003  Rafael Sobis                          955       2303
                              WB       038  Ivan                                 1320        755
                                       040  Egídio                                752       1482
      10807       18809     5 CO       078  Jaime De AlMFda                       803       1156
                              GK       023  Vanderlei                             776       1858
                              CB       098  Digão                                 927        931
                                       099  Samir                                 680        267
                              MF       058  Fred                                  892       3028
                                       059  Zé Roberto                            878       2593
                                       060  Otavinho                              807        762
                              FW       001  Éderson                              1012       1712
                                       002  Maxi Biancucchi                      1005       1962
                                       003  Rafael Sobis                          955       2303
                              WB       038  Ivan                                 1320        755
                                       040  Egídio                                752       1482
      10791       18915     6 CO       078  Jaime De AlMFda                       803       1156
                              GK       022  Wilson                                794       1239
                              CB       098  Digão                                 927        931
                                       099  Samir                                 680        267
                              MF       058  Fred                                  892       3028
                                       059  Zé Roberto                            878       2593
                                       061  Carlos Alberto                        675       1501
                              FW       001  Éderson                              1012       1712
                                       002  Maxi Biancucchi                      1005       1962
                                       003  Rafael Sobis                          955       2303
                              WB       038  Ivan                                 1320        755
                                       039  Elsinho                               850       1468
      10790       17201     7 CO       078  Jaime De AlMFda                       803       1156
                              GK       022  Wilson                                794       1239
                              CB       098  Digão                                 927        931
                                       099  Samir                                 680        267
                              MF       058  Fred                                  892       3028
                                       059  Zé Roberto                            878       2593
                                       060  Otavinho                              807        762
                              FW       001  Éderson                              1012       1712
                                       002  Maxi Biancucchi                      1005       1962
                                       004  Fernandão                             822       1328
                              WB       038  Ivan                                 1320        755
                                       039  Elsinho                               850       1468
                  18052     8 CO       078  Jaime De AlMFda                       803       1156
                              GK       021  Fábio                                 794       2090
                              CB       098  Digão                                 927        931
                                       099  Samir                                 680        267
                              MF       058  Fred                                  892       3028
                                       059  Zé Roberto                            878       2593
                                       060  Otavinho                              807        762
                              FW       001  Éderson                              1012       1712
                                       002  Maxi Biancucchi                      1005       1962
                                       004  Fernandão                             822       1328
                              WB       038  Ivan                                 1320        755
                                       039  Elsinho                               850       1468
      10772       17820     9 CO       078  Jaime De AlMFda                       803       1156
                              GK       023  Vanderlei                             776       1858
                              CB       098  Digão                                 927        931
                                       099  Samir                                 680        267
                              MF       058  Fred                                  892       3028
                                       059  Zé Roberto                            878       2593
                                       060  Otavinho                              807        762
                              FW       001  Éderson                              1012       1712
                                       002  Maxi Biancucchi                      1005       1962
                                       004  Fernandão                             822       1328
                              WB       038  Ivan                                 1320        755
                                       039  Elsinho                               850       1468
      10766       17948    10 CO       078  Jaime De AlMFda                       803       1156
                              GK       022  Wilson                                794       1239
                              CB       098  Digão                                 927        931
                                       099  Samir                                 680        267
                              MF       058  Fred                                  892       3028
                                       059  Zé Roberto                            878       2593
                                       060  Otavinho                              807        762
                              FW       001  Éderson                              1012       1712
                                       002  Maxi Biancucchi                      1005       1962
                                       003  Rafael Sobis                          955       2303
                              WB       038  Ivan                                 1320        755
                                       041  Carlinhos                             693       1240

120 rows selected.

Elapsed: 00:00:00.00

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
Pop_Table_Iterate_Base_Link
old   2:   Item_Cat_Seqs.Pop_Table_Iterate_Base_Link(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Pop_Table_Iterate_Base_Link(p_keep_num      => 100,
old   3:                                             p_min_value     => &MIN_VALUE);
new   3:                                             p_min_value     => 0);
11 running sums
SQL_ID  4sxxvubzws1vx, child number 0
-------------------------------------
INSERT /*+ gather_plan_statistics INSERT_IBL */ INTO PATHS_BASE_LINK (
PATH_RNK, ITEM_RNK, LEV, TOT_PRICE, TOT_VALUE, CAT_BASE_ID,
NEXT_CAT_BASE_ID, SAME_CATS, MIN_ITEMS, CAT_BASE_SUM, PRIOR_IBL_ID,
IBL_ID ) WITH PATH_JOIN AS ( SELECT ROW_NUMBER() OVER (PARTITION BY
TRW.CAT_BASE_SUM + IRK.CAT_BASE_ID ORDER BY TRW.TOT_VALUE +
IRK.ITEM_VALUE DESC, TRW.TOT_PRICE + IRK.ITEM_PRICE) PATH_RNK,
IRK.ITEM_RNK, :B7 LEV, TRW.TOT_PRICE + IRK.ITEM_PRICE TOT_PRICE,
TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_BASE_ID,
IRK.NEXT_CAT_BASE_ID, CASE IRK.CAT_BASE_ID WHEN TRW.CAT_BASE_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CAT_BASE_SUM
+ IRK.CAT_BASE_ID CAT_BASE_SUM, TRW.IBL_ID FROM PATHS_BASE_LINK TRW
JOIN ITEMS_RANKED_BASE_LINK IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK +
1) AND (:B2 - (:B1 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE + IRK.ITEM_PRICE
+ :B6 <= :B5 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B4 >= :B3 AND
TRW.LEV < :B1 AND CASE IRK.CAT_BASE_ID WHEN TRW.CAT_BASE_ID THEN TRW
Plan hash value: 3914417277
------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
------------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |                    |      1 |        |      0 |00:00:00.03 |      65 |       |       |          |
|   1 |  LOAD TABLE CONVENTIONAL | PATHS_BASE_LINK    |      1 |        |      0 |00:00:00.03 |      65 |       |       |          |
|   2 |   SEQUENCE               | IBL_SEQ            |      1 |        |   1000 |00:00:00.02 |      15 |       |       |          |
|*  3 |    VIEW                  |                    |      1 |      1 |   1000 |00:00:00.02 |      15 |       |       |          |
|   4 |     WINDOW SORT          |                    |      1 |      1 |  17496 |00:00:00.03 |      15 |  2604K|   733K| 2314K (0)|
|   5 |      NESTED LOOPS        |                    |      1 |      1 |  17496 |00:00:00.02 |      15 |       |       |          |
|*  6 |       TABLE ACCESS FULL  | PATHS_BASE_LINK    |      1 |      1 |    600 |00:00:00.01 |      12 |       |       |          |
|*  7 |       INDEX RANGE SCAN   | SYS_IOT_TOP_177001 |    600 |      1 |  17496 |00:00:00.01 |       3 |       |       |          |
------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
3 - filter(("PATH_RNK"<=:B8 OR :B8=0))
6 - filter("TRW"."LEV"<:B1)
7 - access("IRK"."ITEM_RNK">="TRW"."ITEM_RNK"+1 AND "IRK"."ITEM_RNK"<=:B2-(:B1-"TRW"."LEV"-1))
filter(("TRW"."TOT_PRICE"+"IRK"."ITEM_PRICE"+:B6<=:B5 AND "TRW"."TOT_VALUE"+"IRK"."ITEM_VALUE"+:B4>=:B3 AND
"IRK"."MAX_ITEMS">=CASE "IRK"."CAT_BASE_ID" WHEN "TRW"."CAT_BASE_ID" THEN "TRW"."SAME_CATS"+1 ELSE 1 END  AND
"IRK"."MIN_REMAIN"<=:B1-("TRW"."LEV"+1)+LEAST(CASE "IRK"."CAT_BASE_ID" WHEN "TRW"."CAT_BASE_ID" THEN "TRW"."SAME_CATS"+1
ELSE 1 END ,"IRK"."MIN_ITEMS") AND ("IRK"."CAT_BASE_ID"="TRW"."CAT_BASE_ID" OR "TRW"."SAME_CATS">="TRW"."MIN_ITEMS") AND
("IRK"."CAT_BASE_ID"="TRW"."CAT_BASE_ID" OR "IRK"."CAT_BASE_ID"=NVL("TRW"."NEXT_CAT_BASE_ID","IRK"."CAT_BASE_ID"))))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Pop_Table_Iterate_Base_Link, Constructed at 09 Jun 2024 15:54:06, written at 15:54:07
================================================================================================
Timer                                 Elapsed         CPU       Calls       Ela/Call       CPU/Call
---------------------------------  ----------  ----------  ----------  -------------  -------------
Initial delete (0)                       0.01        0.00           1        0.00600        0.00000
Initial insert (1)                       0.00        0.00           1        0.00000        0.00000
Insert item_base_links  1 (1)            0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 1 (20)            0.00        0.00           1        0.00000        0.00000
Delete paths_base_Link 1 (1)             0.00        0.00           1        0.00100        0.00000
Insert item_base_links  2 (20)           0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 2 (100)           0.00        0.00           1        0.00100        0.00000
Delete paths_base_Link 2 (20)            0.00        0.00           1        0.00000        0.00000
Insert item_base_links  3 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 3 (100)           0.01        0.00           1        0.00600        0.00000
Delete paths_base_Link 3 (100)           0.00        0.00           1        0.00000        0.00000
Insert item_base_links  4 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 4 (100)           0.01        0.01           1        0.00500        0.01000
Delete paths_base_Link 4 (100)           0.00        0.00           1        0.00000        0.00000
Insert item_base_links  5 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 5 (200)           0.01        0.01           1        0.00700        0.01000
Delete paths_base_Link 5 (100)           0.00        0.00           1        0.00000        0.00000
Insert item_base_links  6 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 6 (200)           0.01        0.00           1        0.01000        0.00000
Delete paths_base_Link 6 (200)           0.00        0.00           1        0.00100        0.00000
Insert item_base_links  7 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 7 (200)           0.01        0.01           1        0.00900        0.01000
Delete paths_base_Link 7 (200)           0.00        0.00           1        0.00000        0.00000
Insert item_base_links  8 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 8 (300)           0.01        0.01           1        0.01100        0.01000
Delete paths_base_Link 8 (200)           0.00        0.00           1        0.00000        0.00000
Insert item_base_links  9 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 9 (600)           0.02        0.02           1        0.01900        0.02000
Delete paths_base_Link 9 (300)           0.00        0.00           1        0.00100        0.00000
Insert item_base_links  10 (600)         0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 10 (1000)         0.23        0.22           1        0.22500        0.22000
Delete paths_base_Link 10 (600)          0.00        0.00           1        0.00100        0.00000
Insert item_base_links  11 (1000)        0.00        0.00           1        0.00000        0.00000
Insert paths_base_Link 11 (1300)         0.04        0.03           1        0.03800        0.03000
Delete paths_base_Link 11 (1000)         0.00        0.00           1        0.00000        0.00000
Insert item_base_links  12 (1300)        0.00        0.00           1        0.00100        0.00000
Insert paths_base_Link 12 (1300)         0.03        0.04           1        0.03200        0.04000
Delete paths_base_Link 12 (1300)         0.00        0.00           1        0.00000        0.00000
(Other)                                  0.00        0.00           1        0.00000        0.00000
---------------------------------  ----------  ----------  ----------  -------------  -------------
Total                                    0.37        0.35          39        0.00959        0.00897
---------------------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00862, CPU: 0.00948]

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.48

Path                                 Total Value Total Price  Rank
------------------------------------ ----------- ----------- -----
078022098099058059060001002003038039       10923       18176     1
078023098099058059060001002003038039       10905       18795     2
078022098102058059060001002003038039       10833       18994     3
078022098099058059060001002003038040       10825       18190     4
078023098099058059060001002003038040       10807       18809     5
078022098099058059061001002003038039       10791       18915     6
078022098099058059060001002004038039       10790       17201     7
078021098099058059060001002004038039                   18052     8
078023098099058059060001002004038039       10772       17820     9
078022098099058059060001002003038041       10766       17948    10

10 rows selected.

Elapsed: 00:00:00.00

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
old   2:   Item_Cat_Seqs.Init(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Init(p_keep_num      => 100,
old   3:                      p_min_value     => &MIN_VALUE);
new   3:                      p_min_value     => 0);
11 running sums

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
Array_Iterate

Path                                 Total Value Total Price  Rank
------------------------------------ ----------- ----------- -----
078022098099058059060001002003038039       10923       18176     1
078023098099058059060001002003038039       10905       18795     2
078022098102058059060001002003038039       10833       18994     3
078022098099058059060001002003038040       10825       18190     4
078023098099058059060001002003038040       10807       18809     5
078022098099058059061001002003038039       10791       18915     6
078022098099058059060001002004038039       10790       17201     7
078021098099058059060001002004038039                   18052     8
078023098099058059060001002004038039       10772       17820     9
078022098099058059060001002003038041       10766       17948    10

10 rows selected.

SQL_ID  1xxa6th1dk8zu, child number 0
-------------------------------------
WITH PATH_JOIN AS ( SELECT /*+ gather_plan_statistics ARRAY_ITERATE */
ROW_NUMBER() OVER (PARTITION BY TRW.CATS_PATH || IRK.CAT_ID ORDER BY
TRW.TOT_VALUE + IRK.ITEM_VALUE DESC, TRW.TOT_PRICE + IRK.ITEM_PRICE)
PATH_RNK, IRK.ITEM_RNK, TRW.LEV + 1 LEV, TRW.TOT_PRICE + IRK.ITEM_PRICE
TOT_PRICE, TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_ID,
IRK.NEXT_CAT_ID, CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1
ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CATS_PATH || IRK.CAT_ID
CATS_PATH, TRW.PATH || IRK.ITEM_ID PATH FROM TABLE(:B1 ) TRW JOIN
ITEMS_RANKED IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK + 1) AND
(IRK.N_ITEMS - (:B2 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE +
IRK.ITEM_PRICE + :B6 <= :B5 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B4 >=
:B3 AND TRW.LEV < :B2 AND CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END <= IRK.MAX_ITEMS AND :B2 - (TRW.LEV + 1) +
LEAST(CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1 ELSE 1
END, IRK.MIN_ITEMS) >= IRK.MIN_REMAIN AND (IRK.CAT_ID
Plan hash value: 4041416802
------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                            | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                     |                    |      1 |        |   1000 |00:00:00.03 |       3 |       |       |          |
|*  1 |  VIEW                                |                    |      1 |      1 |   1000 |00:00:00.03 |       3 |       |       |          |
|   2 |   WINDOW SORT                        |                    |      1 |      1 |  17496 |00:00:00.04 |       3 |  4234K|   873K| 3763K (0)|
|   3 |    NESTED LOOPS                      |                    |      1 |      1 |  17496 |00:00:00.02 |       3 |       |       |          |
|*  4 |     COLLECTION ITERATOR PICKLER FETCH|                    |      1 |      1 |    600 |00:00:00.01 |       0 |       |       |          |
|*  5 |     INDEX RANGE SCAN                 | SYS_IOT_TOP_176995 |    600 |      1 |  17496 |00:00:00.02 |       3 |       |       |          |
------------------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
1 - filter(("PATH_RNK"<=:B7 OR :B7=0))
4 - filter(VALUE(KOKBF$)<:B2)
5 - access("IRK"."ITEM_RNK">=VALUE(KOKBF$)+1)
filter((VALUE(KOKBF$)+"IRK"."ITEM_PRICE"+:B6<=:B5 AND VALUE(KOKBF$)+"IRK"."ITEM_VALUE"+:B4>=:B3 AND
"IRK"."ITEM_RNK"<="IRK"."N_ITEMS"-(:B2-VALUE(KOKBF$)-1) AND ("IRK"."CAT_ID"=VALUE(KOKBF$) OR
"IRK"."CAT_ID"=NVL(VALUE(KOKBF$),"IRK"."CAT_ID")) AND "IRK"."MAX_ITEMS">=CASE "IRK"."CAT_ID" WHEN VALUE(KOKBF$) THEN VALUE(KOKBF$)+1
ELSE 1 END  AND ("IRK"."CAT_ID"=VALUE(KOKBF$) OR VALUE(KOKBF$)>=VALUE(KOKBF$)) AND "IRK"."MIN_REMAIN"<=:B2-(VALUE(KOKBF$)+1)+LEAST(CASE
"IRK"."CAT_ID" WHEN VALUE(KOKBF$) THEN VALUE(KOKBF$)+1 ELSE 1 END ,"IRK"."MIN_ITEMS")))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Array_Iterate, Constructed at 09 Jun 2024 15:54:07, written at 15:54:07
==================================================================================
Timer                    Elapsed         CPU       Calls       Ela/Call       CPU/Call
--------------------  ----------  ----------  ----------  -------------  -------------
Insert 1 (20)               0.00        0.00           1        0.00100        0.00000
Reset paths array 1         0.00        0.00           1        0.00000        0.00000
Insert 2 (100)              0.00        0.00           1        0.00200        0.00000
Reset paths array 2         0.00        0.00           1        0.00000        0.00000
Insert 3 (100)              0.01        0.00           1        0.00800        0.00000
Reset paths array 3         0.00        0.00           1        0.00000        0.00000
Insert 4 (100)              0.01        0.00           1        0.00700        0.00000
Reset paths array 4         0.00        0.00           1        0.00000        0.00000
Insert 5 (200)              0.01        0.01           1        0.00900        0.01000
Reset paths array 5         0.00        0.00           1        0.00100        0.00000
Insert 6 (200)              0.01        0.01           1        0.01400        0.01000
Reset paths array 6         0.00        0.00           1        0.00000        0.00000
Insert 7 (200)              0.01        0.01           1        0.01400        0.01000
Reset paths array 7         0.00        0.00           1        0.00000        0.00000
Insert 8 (300)              0.02        0.02           1        0.01800        0.02000
Reset paths array 8         0.00        0.00           1        0.00000        0.00000
Insert 9 (600)              0.03        0.03           1        0.03100        0.03000
Reset paths array 9         0.00        0.00           1        0.00000        0.00000
Insert 10 (1)               0.25        0.26           1        0.24800        0.26000
Reset paths array 10        0.00        0.00           1        0.00000        0.00000
Insert 11 (1300)            0.06        0.06           1        0.06400        0.06000
Reset paths array 11        0.00        0.00           1        0.00100        0.00000
Insert 12 (1300)            0.05        0.06           1        0.05300        0.06000
Pipe rows                   0.00        0.00           1        0.00100        0.00000
(Other)                     0.00        0.00           1        0.00000        0.00000
--------------------  ----------  ----------  ----------  -------------  -------------
Total                       0.47        0.46          25        0.01888        0.01840
--------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00862, CPU: 0.00862]
Elapsed: 00:00:00.58

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
Pop_Table_Recurse
old   2:   Item_Cat_Seqs.Pop_Table_Recurse(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Pop_Table_Recurse(p_keep_num      => 100,
old   3:                                   p_min_value     => &MIN_VALUE);
new   3:                                   p_min_value     => 0);
11 running sums
SQL_ID  323bar13mrwwy, child number 0
-------------------------------------
INSERT /*+ gather_plan_statistics INSERT_PATHS */ INTO PATHS (
PATH_RNK, ITEM_RNK, LEV, TOT_PRICE, TOT_VALUE, CAT_ID, NEXT_CAT_ID,
SAME_CATS, MIN_ITEMS, CATS_PATH, PATH ) WITH PATH_JOIN AS ( SELECT
ROW_NUMBER() OVER (PARTITION BY TRW.CATS_PATH || IRK.CAT_ID ORDER BY
TRW.TOT_VALUE + IRK.ITEM_VALUE DESC, TRW.TOT_PRICE + IRK.ITEM_PRICE)
PATH_RNK, IRK.ITEM_RNK, :B6 LEV, TRW.TOT_PRICE + IRK.ITEM_PRICE
TOT_PRICE, TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_ID,
IRK.NEXT_CAT_ID, CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1
ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CATS_PATH || IRK.CAT_ID
CATS_PATH, TRW.PATH || IRK.ITEM_ID PATH FROM PATHS TRW JOIN
ITEMS_RANKED IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK + 1) AND
(IRK.N_ITEMS - (:B1 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE +
IRK.ITEM_PRICE + :B5 <= :B4 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B3 >=
:B2 AND TRW.LEV < :B1 AND CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END <= IRK.MAX_ITEMS AND :B1 - (TRW.LEV + 1) +
LEAST(CAS
Plan hash value: 1905266298
------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
------------------------------------------------------------------------------------------------------------------------------------
|   0 | INSERT STATEMENT         |                    |      1 |        |      0 |00:00:00.04 |     128 |       |       |          |
|   1 |  LOAD TABLE CONVENTIONAL | PATHS              |      1 |        |      0 |00:00:00.04 |     128 |       |       |          |
|*  2 |   VIEW                   |                    |      1 |      1 |   1000 |00:00:00.02 |      45 |       |       |          |
|   3 |    WINDOW SORT           |                    |      1 |      1 |  17496 |00:00:00.04 |      45 |  3809K|   839K| 3385K (0)|
|   4 |     NESTED LOOPS         |                    |      1 |      1 |  17496 |00:00:00.02 |      45 |       |       |          |
|*  5 |      TABLE ACCESS FULL   | PATHS              |      1 |      1 |    600 |00:00:00.01 |      42 |       |       |          |
|*  6 |      INDEX RANGE SCAN    | SYS_IOT_TOP_176995 |    600 |      1 |  17496 |00:00:00.01 |       3 |       |       |          |
------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
2 - filter(("PATH_RNK"<=:B7 OR :B7=0))
5 - filter("TRW"."LEV"<:B1)
6 - access("IRK"."ITEM_RNK">="TRW"."ITEM_RNK"+1)
filter(("TRW"."TOT_PRICE"+"IRK"."ITEM_PRICE"+:B5<=:B4 AND "TRW"."TOT_VALUE"+"IRK"."ITEM_VALUE"+:B3>=:B2 AND
"IRK"."ITEM_RNK"<="IRK"."N_ITEMS"-(:B1-"TRW"."LEV"-1) AND "IRK"."MAX_ITEMS">=CASE "IRK"."CAT_ID" WHEN "TRW"."CAT_ID" THEN
"TRW"."SAME_CATS"+1 ELSE 1 END  AND "IRK"."MIN_REMAIN"<=:B1-("TRW"."LEV"+1)+LEAST(CASE "IRK"."CAT_ID" WHEN "TRW"."CAT_ID"
THEN "TRW"."SAME_CATS"+1 ELSE 1 END ,"IRK"."MIN_ITEMS") AND ("IRK"."CAT_ID"="TRW"."CAT_ID" OR
"TRW"."SAME_CATS">="TRW"."MIN_ITEMS") AND ("IRK"."CAT_ID"="TRW"."CAT_ID" OR
"IRK"."CAT_ID"=NVL("TRW"."NEXT_CAT_ID","IRK"."CAT_ID"))))
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Pop_Table_Recurse, Constructed at 09 Jun 2024 15:54:07, written at 15:54:08
======================================================================================
Timer                      Elapsed         CPU       Calls       Ela/Call       CPU/Call
----------------------  ----------  ----------  ----------  -------------  -------------
Initial delete (1300)         0.00        0.00           1        0.00100        0.00000
Initial insert (1)            0.00        0.00           1        0.00000        0.00000
Insert paths 1 (20)           0.00        0.00           1        0.00000        0.00000
Delete paths 1 (1)            0.00        0.00           1        0.00000        0.00000
Insert paths 2 (100)          0.00        0.00           1        0.00200        0.00000
Delete paths 2 (20)           0.00        0.00           1        0.00000        0.00000
Insert paths 3 (100)          0.01        0.00           1        0.00700        0.00000
Delete paths 3 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths 4 (100)          0.01        0.00           1        0.00600        0.00000
Delete paths 4 (100)          0.00        0.00           1        0.00100        0.00000
Insert paths 5 (200)          0.01        0.01           1        0.00800        0.01000
Delete paths 5 (100)          0.00        0.00           1        0.00000        0.00000
Insert paths 6 (200)          0.01        0.01           1        0.01200        0.01000
Delete paths 6 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths 7 (200)          0.01        0.02           1        0.01200        0.02000
Delete paths 7 (200)          0.00        0.00           1        0.00100        0.00000
Insert paths 8 (300)          0.01        0.01           1        0.01400        0.01000
Delete paths 8 (200)          0.00        0.00           1        0.00000        0.00000
Insert paths 9 (600)          0.03        0.02           1        0.02500        0.02000
Delete paths 9 (300)          0.00        0.00           1        0.00000        0.00000
Insert paths 10 (1000)        0.24        0.23           1        0.23600        0.23000
Delete paths 10 (600)         0.00        0.00           1        0.00100        0.00000
Insert paths 11 (1300)        0.05        0.05           1        0.04800        0.05000
Delete paths 11 (1000)        0.00        0.00           1        0.00100        0.00000
Insert paths 12 (1300)        0.05        0.02           1        0.04500        0.02000
Delete paths 12 (1300)        0.00        0.00           1        0.00100        0.00000
(Other)                       0.00        0.00           1        0.00000        0.00000
----------------------  ----------  ----------  ----------  -------------  -------------
Total                         0.42        0.37          27        0.01559        0.01370
----------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00847, CPU: 0.00932]

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.53

Path                                 Total Value Total Price  Rank
------------------------------------ ----------- ----------- -----
078022098099058059060001002003038039       10923       18176     1
078023098099058059060001002003038039       10905       18795     2
078022098102058059060001002003038039       10833       18994     3
078022098099058059060001002003038040       10825       18190     4
078023098099058059060001002003038040       10807       18809     5
078022098099058059061001002003038039       10791       18915     6
078022098099058059060001002004038039       10790       17201     7
078021098099058059060001002004038039                   18052     8
078023098099058059060001002004038039       10772       17820     9
078022098099058059060001002003038041       10766       17948    10

10 rows selected.

Elapsed: 00:00:00.00

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
old   2:   Item_Cat_Seqs.Init(p_keep_num      => &KEEP_NUM,
new   2:   Item_Cat_Seqs.Init(p_keep_num      => 100,
old   3:                      p_min_value     => &MIN_VALUE);
new   3:                      p_min_value     => 0);
11 running sums

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
Array_Recurse

Path                                 Total Value Total Price  Rank
------------------------------------ ----------- ----------- -----
078022098099058059060001002003038039       10923       18176     1
078023098099058059060001002003038039       10905       18795     2
078022098102058059060001002003038039       10833       18994     3
078022098099058059060001002003038040       10825       18190     4
078023098099058059060001002003038040       10807       18809     5
078022098099058059061001002003038039       10791       18915     6
078022098099058059060001002004038039       10790       17201     7
078021098099058059060001002004038039                   18052     8
078023098099058059060001002004038039       10772       17820     9
078022098099058059060001002003038041       10766       17948    10

10 rows selected.

SQL_ID  3s128ufk13m2r, child number 0
-------------------------------------
WITH PATH_JOIN AS ( SELECT /*+ gather_plan_statistics ARRAY_RECURSE */
ROW_NUMBER() OVER (PARTITION BY TRW.CATS_PATH || IRK.CAT_ID ORDER BY
TRW.TOT_VALUE + IRK.ITEM_VALUE DESC, TRW.TOT_PRICE + IRK.ITEM_PRICE)
PATH_RNK, IRK.ITEM_RNK, TRW.LEV + 1 LEV, TRW.TOT_PRICE + IRK.ITEM_PRICE
TOT_PRICE, TRW.TOT_VALUE + IRK.ITEM_VALUE TOT_VALUE, IRK.CAT_ID,
IRK.NEXT_CAT_ID, CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CATS + 1
ELSE 1 END SAME_CATS, IRK.MIN_ITEMS, TRW.CATS_PATH || IRK.CAT_ID
CATS_PATH, TRW.PATH || IRK.ITEM_ID PATH FROM
ITEM_CAT_SEQS.ARRAY_RECURSE(P_TIMER_SET => :B1 , P_LEV => NVL(:B2 , :B3
) - 1) TRW JOIN ITEMS_RANKED IRK ON IRK.ITEM_RNK BETWEEN (TRW.ITEM_RNK
+ 1) AND (IRK.N_ITEMS - (:B3 - TRW.LEV - 1)) WHERE TRW.TOT_PRICE +
IRK.ITEM_PRICE + :B7 <= :B6 AND TRW.TOT_VALUE + IRK.ITEM_VALUE + :B5 >=
:B4 AND TRW.LEV < :B3 AND CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN
TRW.SAME_CATS + 1 ELSE 1 END <= IRK.MAX_ITEMS AND :B3 - (TRW.LEV + 1) +
LEAST(CASE IRK.CAT_ID WHEN TRW.CAT_ID THEN TRW.SAME_CAT
Plan hash value: 745844267
--------------------------------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                              | Name               | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
--------------------------------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                       |                    |      1 |        |   1000 |00:00:00.15 |      11 |       |       |          |
|*  1 |  VIEW                                  |                    |      1 |      1 |   1000 |00:00:00.15 |      11 |       |       |          |
|   2 |   WINDOW SORT                          |                    |      1 |      1 |  17496 |00:00:00.16 |      11 |  4447K|   889K| 3952K (0)|
|   3 |    MERGE JOIN                          |                    |      1 |      1 |  17496 |00:00:00.14 |      11 |       |       |          |
|   4 |     SORT JOIN                          |                    |      1 |    114 |    114 |00:00:00.01 |       1 | 18432 | 18432 |16384  (0)|
|   5 |      INDEX FULL SCAN                   | SYS_IOT_TOP_176995 |      1 |    114 |    114 |00:00:00.01 |       1 |       |       |          |
|*  6 |     FILTER                             |                    |    114 |        |  17496 |00:00:00.14 |      10 |       |       |          |
|*  7 |      SORT JOIN                         |                    |    114 |    408 |  23990 |00:00:00.12 |      10 | 86016 | 86016 |75776  (0)|
|*  8 |       COLLECTION ITERATOR PICKLER FETCH| ARRAY_RECURSE      |      1 |    408 |    600 |00:00:00.10 |      10 |       |       |          |
--------------------------------------------------------------------------------------------------------------------------------------------------
Predicate Information (identified by operation id):
---------------------------------------------------
1 - filter(("PATH_RNK"<=:B8 OR :B8=0))
6 - filter((VALUE(KOKBF$)+"IRK"."ITEM_PRICE"+:B7<=:B6 AND VALUE(KOKBF$)+"IRK"."ITEM_VALUE"+:B5>=:B4 AND
"IRK"."ITEM_RNK"<="IRK"."N_ITEMS"-(:B3-VALUE(KOKBF$)-1) AND ("IRK"."CAT_ID"=VALUE(KOKBF$) OR
"IRK"."CAT_ID"=NVL(VALUE(KOKBF$),"IRK"."CAT_ID")) AND "IRK"."MAX_ITEMS">=CASE "IRK"."CAT_ID" WHEN VALUE(KOKBF$) THEN VALUE(KOKBF$)+1 ELSE
1 END  AND ("IRK"."CAT_ID"=VALUE(KOKBF$) OR VALUE(KOKBF$)>=VALUE(KOKBF$)) AND "IRK"."MIN_REMAIN"<=:B3-(VALUE(KOKBF$)+1)+LEAST(CASE
"IRK"."CAT_ID" WHEN VALUE(KOKBF$) THEN VALUE(KOKBF$)+1 ELSE 1 END ,"IRK"."MIN_ITEMS")))
7 - access(INTERNAL_FUNCTION("IRK"."ITEM_RNK")>=VALUE(KOKBF$)+1)
filter(INTERNAL_FUNCTION("IRK"."ITEM_RNK")>=VALUE(KOKBF$)+1)
8 - filter(VALUE(KOKBF$)<:B3)
Note
-----
- dynamic statistics used: dynamic sampling (level=2)
Timer Set: Array_Recurse, Constructed at 09 Jun 2024 15:54:08, written at 15:54:08
==================================================================================
Timer                        Elapsed         CPU       Calls       Ela/Call       CPU/Call
------------------------  ----------  ----------  ----------  -------------  -------------
Recurse level: 1 (20)           0.00        0.00           1        0.00300        0.00000
Recurse level: 2 (100)          0.00        0.00           1        0.00200        0.00000
Recurse level: 3 (100)          0.01        0.00           1        0.00900        0.00000
Recurse level: 4 (100)          0.01        0.01           1        0.00800        0.01000
Recurse level: 5 (200)          0.01        0.01           1        0.01100        0.01000
Recurse level: 6 (200)          0.02        0.02           1        0.01600        0.02000
Recurse level: 7 (200)          0.02        0.02           1        0.01600        0.02000
Recurse level: 8 (300)          0.02        0.02           1        0.02000        0.02000
Recurse level: 9 (600)          0.03        0.03           1        0.03300        0.03000
Recurse level: 10 (1000)        0.25        0.24           1        0.25000        0.24000
Recurse level: 11 (1300)        0.07        0.08           1        0.06600        0.08000
Recurse level: 12 (1300)        0.06        0.06           1        0.05700        0.06000
(Other)                         0.00        0.00           1        0.00100        0.00000
------------------------  ----------  ----------  ----------  -------------  -------------
Total                           0.49        0.49          13        0.03785        0.03769
------------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00862, CPU: 0.00776]
Elapsed: 00:00:00.59

PL/SQL procedure successfully completed.

Elapsed: 00:00:00.00
Timer Set: Item_Cat_Seqs, Constructed at 09 Jun 2024 15:54:05, written at 15:54:08
==================================================================================
Timer                                   Elapsed         CPU       Calls       Ela/Call       CPU/Call
-----------------------------------  ----------  ----------  ----------  -------------  -------------
Pop_Table_Iterate                          0.54        0.52           1        0.53500        0.52000
Solutions by Category                      0.01        0.00           1        0.00600        0.00000
Pop_Table_Iterate_Base                     0.52        0.51           1        0.52400        0.51000
Pop_Table_Iterate_Link                     0.52        0.50           1        0.52100        0.50000
Pop_Table_Iterate_Link - item level        0.01        0.00           1        0.01200        0.00000
Pop_Table_Iterate_Base_Link                0.49        0.46           1        0.48700        0.46000
Array_Iterate                              0.59        0.56           1        0.58900        0.56000
Pop_Table_Recurse                          0.53        0.48           1        0.53200        0.48000
Array_Recurse                              0.60        0.58           1        0.60000        0.58000
(Other)                                    0.00        0.00           1        0.00100        0.00000
-----------------------------------  ----------  ----------  ----------  -------------  -------------
Total                                      3.81        3.61          10        0.38070        0.36100
-----------------------------------  ----------  ----------  ----------  -------------  -------------
[Timer timed (per call in ms): Elapsed: 0.00885, CPU: 0.00796]

PL/SQL procedure successfully completed.


'END:'||TO_CHAR(SYSDATE,'DD-MON-YY
----------------------------------
End: 09-JUN-2024 15:54:08

